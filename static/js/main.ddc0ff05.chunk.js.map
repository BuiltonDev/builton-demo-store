{"version":3,"sources":["globalStore/localStorage.js","globalStore/globalState.js","config/index.js","utils/firebase.js","utils/builton.js","assets/icons/b_logo.jsx","components/BuiltonLogo/index.js","components/HeaderDropdown/index.jsx","assets/icons/cart.jsx","assets/icons/closeIcon.jsx","assets/icons/menuIcon.jsx","assets/icons/person.jsx","components/DropdownMenu/index.jsx","components/DropdownMenuItem/index.jsx","assets/icons/my_account.jsx","assets/icons/log_out.jsx","utils/productModifiers.js","assets/icons/remove_shopping.jsx","components/Spinner/index.jsx","components/Button/index.jsx","utils/mobile.js","components/Menu/index.jsx","components/Header/index.jsx","components/ImageCategory/index.jsx","utils/toast.js","components/BuiltonSplash/index.jsx","assets/icons/arrowLeft.jsx","assets/icons/arrowRight.jsx","components/Image/index.jsx","components/Carousel/index.jsx","components/SectionHeader/index.jsx","components/Footer/index.jsx","screens/Home/index.jsx","components/Input/index.jsx","components/Hyperlink/index.jsx","utils/auth.js","screens/Auth/authForm/index.jsx","screens/Auth/index.jsx","assets/icons/search.jsx","hooks/useEventListener.jsx","assets/icons/filterIcon.jsx","components/Filter/index.jsx","components/ProductListHeader/index.jsx","components/NoResults/index.jsx","screens/ProductList/index.jsx","screens/Product/index.jsx","components/CheckoutNavigation/index.jsx","components/TableRow/index.jsx","components/TableHeader/index.jsx","components/Table/index.jsx","screens/Checkout/Bag/index.jsx","screens/Checkout/Authentication/index.jsx","components/ListItem/index.jsx","screens/Checkout/PaymentMethod/index.jsx","utils/address.js","screens/Checkout/DeliveryAddress/index.jsx","screens/Checkout/Overview/index.jsx","screens/Checkout/Disclaimer/index.jsx","screens/Checkout/index.jsx","utils/dateModifiers.js","utils/orderModifiers.js","screens/MyAccount/MyOrders/index.jsx","screens/MyAccount/MyProfile/index.jsx","screens/MyAccount/index.jsx","screens/MyOrder/index.jsx","App.js","index.js","assets/images/puma-logo.png","assets/images/adidas-logo.png","assets/images/nike-logo.png"],"names":["clearFieldCurry","field","localStorage","removeItem","error","setFieldCurry","value","setItem","JSON","stringify","getFieldCurry","parse","getItem","INITIALIZED","DEFAULT_CHECKOUT","0","title","complete","1","2","3","4","DEFAULT_ORDER","items","delivery_address","payment_method","clearUser","getUser","setUser","clearBuiltonSession","getBuiltonSession","setBuiltonSession","clearBag","getBag","setBag","clearCheckout","getCheckout","setCheckout","clearOrder","getOrder","setOrder","addReducer","global","dispatch","user","setLocalStorage","item","bag","checkout","order","paymentMethod","builtonSession","itemId","i","length","size","_id","$oid","splice","a","async","updateOrder","updatePaymentMethod","updateCheckoutStep","updateUser","updateBuiltonSession","console","log","data","err","setGlobal","getDispatch","logout","config","firebase","initializeApp","apiKey","authDomain","globalState","BuiltonClient","Builton","bearerToken","refreshTokenFn","Promise","resolve","reject","auth","currentUser","getIdToken","idToken","unsubscribe","onAuthStateChanged","Error","endpoint","BLogo","width","height","x","y","viewBox","className","style","fill","d","points","defaultProps","BuiltonLogo","PropTypes","obj","HeaderDropdown","children","open","containerRef","useRef","cursorPosRef","useEffect","setTimeout","current","classList","add","state","isActive","remove","ReactCursorPosition","ref","hoverOffDelayInMs","activationInteractionMouse","INTERACTIONS","HOVER","activationInteractionTouch","TAP","onActivationChanged","Cart","color","CloseIcon","MenuIcon","Account","DropdownMenu","DropdownMenuItem","onClick","MyAccount","SignOut","xmlns","getProductName","productName","indexOf","index","substr","trim","getSneakersSizes","product","prod","constructor","Array","_sub_products","map","subProd","short_description","toLowerCase","id","slice","getSneakersSize","subProduct","RemoveShopping","Spinner","Button","loading","type","disabled","checkIfMobile","test","navigator","userAgent","Menu","useState","cartOpen","setCartOpen","userMenuOpen","setUserMenuOpen","menuOpen","setMenuOpen","useGlobal","removeItemFrombag","useDispatch","history","useReactRouter","document","body","overflow","renderCartContainer","key","push","category","name","final_price","currency","ev","stopPropagation","padding","fontSize","total","calculateTotalAmount","href","rel","target","e","preventDefault","onMouseEnter","onMouseLeave","email","Header","React","memo","ImageCategory","imageSrc","onLoad","pageLoaded","positionX","positionY","imageRef","onPositionChanged","elementDimension","el","elementDimensions","midWidth","midHeight","position","transform","handleImagePosition","toUpperCase","src","alt","notify","message","options","toast","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","BuiltonSplash","show","backgroundColor","ArrowLeft","ArrowRight","Image","onError","imgRef","isCached","calcActiveItems","countActiveItems","Carousel","onActiveItemClick","activeItems","breakpoint","activeItem","setActiveItem","loadedItems","setLoadedItems","loaded","setLoaded","carouselRef","match","handleResize","window","innerWidth","addEventListener","removeEventListener","params","productId","carousel","maxWidth","clientWidth","includes","left","leftStyle","marginFactor","right","setCarouselItems","image","public_url","imageLoaded","hasLoaded","handleClick","activeItemIndex","copyActiveItem","pushActiveItem","discount","oldProp","newProp","SectionHeader","Footer","withRouter","products","setProducts","categories","setCategories","setPageLoaded","popularProducts","setPopularProducts","builton","get","urlParams","expand","tags","getProducts","aiModels","getRecommendations","recommendations","result","recommendedProducts","recommendedProduct","undefined","fetchRecommendations","cat","Object","keys","catLoaded","catValues","values","adidas","nike","puma","Input","timeout","inputProps","submitting","placeholder","colorScheme","debounce","leftAdornment","getElementById","parentNode","onChange","input","persist","debouncedValue","clearTimeout","handleInputChange","paddingLeft","htmlFor","top","Hyperlink","setFirebaseToken","fbUserPromise","fbPromise","refreshBearerToken","AuthForm","onAuth","formType","setFormType","subscription","touched","meta","onSubmit","firebaseClient","createUserWithEmailAndPassword","password","signInWithEmailAndPassword","users","authenticate","apiUser","setMe","validate","errors","confirmPassword","handleSubmit","render","autoComplete","userReactRouter","Search","useEventListener","eventName","handler","element","savedHandler","eventListener","event","FilterIcon","Filter","filterOptions","renderOption","onFilter","contentRef","filterOpen","setFilterOpen","filteredItems","setFilteredItems","contains","option","indx","setFilter","FILTER_OPTIONS","ProductListHeader","searchLoading","onSearchChange","brandLogo","setFilterOptions","subProds","sizes","getSubproducts","val","sort","objectFit","NoResults","loadingMore","setLoadingMore","setLoading","setSearchLoading","rawProducts","setRawProducts","setBrandLogo","tagsString","setTagsString","AdidasLogo","PumaLogo","NikeLogo","fetchProducts","filterCategory","apiProducts","price","description","searchString","search","sortProducts","TransitionGroup","CSSTransition","classNames","renderProductItem","paginationTotal","next","nextPage","getNextProductsPage","Product","setProduct","similarProducts","setSimilarProducts","selectedSize","setSelectedSize","addItemToBag","apiProduct","fetchProduct","similar","simProds","reference_label","flex","marginBottom","human_id","b","parseFloat","prodSize","marginTop","minWidth","CheckoutNavigation","onStep","onPlaceOrder","shouldNavigate","step","setStep","isNextStep","setIsNextStep","setCheckoutStep","pushStep","stepsVals","animateSteps","checkoutStepsCopy","stepNumb","elements","getElementsByClassName","childrenElements","defaultTransitionDelay","transitionDelay","animationDelay","TableRow","TableHeader","Table","CheckoutBag","renderBagRow","CheckoutAuthentication","updateCheckout","checkoutCopy","ListItem","CheckoutPaymentMethod","setPaymentMethod","updateOrderState","paymentMethods","create","token","getPaymentMethod","card","last4","exp_month","exp_year","parseGooglePlace","place","componentForm","street_number","apiName","route","locality","country","postal_code","administrative_area_level_1","address","address_components","component","addressType","types","myComponentForm","geometry","location","lat","lng","CheckoutDeliveryAddress","selectedAddress","setSelectedAddress","setAddress","newAddress","onSelect","geocodeByAddress","addressObj","parsedAddress","getInputProps","suggestions","getSuggestionItemProps","suggestion","active","street_name","zip_code","city","CheckoutConfirmation","Disclaimer","confirmOrder","setConfirmOrder","setRecommendedProducts","complementaryItems","warn","quantity","sub_products","placeOrder","orders","createdOrder","payments","pay","Bag","Authentication","PaymentMethod","DeliveryAddress","Overview","checkShouldNavigate","currentStep","timestampToDateString","timestamp","date","Date","toLocaleDateString","toLocaleTimeString","getStatusColor","status","MyOrders","setOrders","rawOrders","setRawOrders","loadMore","setLoadMore","fetchOrders","delivery_status","created","$date","total_amount","newOrders","loadMoreOrders","MyProfile","fileInputRef","update","updatedUser","files","imageData","images","isPublic","avatar","url","accept","first_name","click","deleteAvatar","initialValues","last_name","activeMenu","setActiveMenu","menuId","orderId","fetchOrder","stringAddress","building","zipcode","parseAddress","payment","current_state","ProtectedRoute","Component","props","path","to","renderView","App","display","exact","Home","ProductList","Checkout","MyOrder","ReactDOM","module","exports"],"mappings":"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","file":"static/js/main.ddc0ff05.chunk.js","sourcesContent":["const clearAllFields = () => {\n  for (let i = localStorage.length - 1; i >= 0; i--) {\n    if (localStorage.key(i).startsWith('builton-demo-')) {\n      localStorage.removeItem(localStorage.key(i));\n    }\n  }\n};\n\nconst clearFieldCurry = field => {\n  return () => {\n    try {\n      localStorage.removeItem(`builton-demo-${field}`);\n    } catch (error) {\n      throw error;\n    }\n  };\n};\n\nconst setFieldCurry = field => {\n  return value => {\n    try {\n      localStorage.setItem(`builton-demo-${field}`, JSON.stringify(value));\n    } catch (error) {\n      throw error;\n    }\n  };\n};\n\nconst getFieldCurry = field => {\n  return () => {\n    let value = null;\n    try {\n      value = JSON.parse(localStorage.getItem(`builton-demo-${field}`));\n    } catch (error) {\n      throw error;\n    }\n    return value;\n  };\n};\n\nexport { clearFieldCurry, setFieldCurry, getFieldCurry, clearAllFields };\n","import { setGlobal, resetGlobal, addReducer, getDispatch } from 'reactn';\nimport {\n  clearFieldCurry,\n  getFieldCurry,\n  setFieldCurry,\n  clearAllFields\n} from './localStorage';\n\nlet INITIALIZED = false;\n\nconst DEFAULT_CHECKOUT = {\n  0: {\n    title: 'bag',\n    complete: false,\n  },\n  1: {\n    title: 'authentication',\n    complete: false,\n  },\n  2: {\n    title: 'payment_method',\n    complete: false,\n  },\n  3: {\n    title: 'delivery_address',\n    complete: false,\n  },\n  4: {\n    title: 'confirm',\n    complete: false,\n  }\n};\n\nconst DEFAULT_ORDER = {\n  items: [],\n  delivery_address: '',\n  payment_method: '',\n};\n\nconst clearUser = clearFieldCurry('user');\nconst getUser = getFieldCurry('user');\nconst setUser = setFieldCurry('user');\n\nconst clearBuiltonSession = clearFieldCurry('builtonSession');\nconst getBuiltonSession = getFieldCurry('builtonSession');\nconst setBuiltonSession = setFieldCurry('builtonSession');\n\nconst clearBag = clearFieldCurry('bag');\nconst getBag = getFieldCurry('bag');\nconst setBag = setFieldCurry('bag');\n\nconst clearCheckout = clearFieldCurry('checkout');\nconst getCheckout = getFieldCurry('checkout');\nconst setCheckout = setFieldCurry('checkout');\n\nconst clearOrder = clearFieldCurry('order');\nconst getOrder = getFieldCurry('order');\nconst setOrder = setFieldCurry('order');\n\naddReducer('updateUser', (global, dispatch, user, setLocalStorage = true) => {\n  if (setLocalStorage) {\n    setUser(user);\n  }\n  return {\n    user\n  };\n});\n\naddReducer('addItemToBag', (global, dispatch, item) => {\n  setBag([...(getBag() || []), item]);\n  return {\n    bag: [...(getBag() || [])]\n  }\n});\n\naddReducer('clearBag', (global, dispatch) => {\n  setBag(null);\n  return {\n    bag: null\n  }\n});\n\naddReducer('updateCheckoutStep', (global, dispatch, checkout) => {\n  setCheckout(checkout);\n  return {\n    checkout\n  }\n});\n\naddReducer('updateOrder', (global, dispatch, order) => {\n  setOrder(order);\n  return {\n    order\n  }\n});\n\naddReducer('updatePaymentMethod', (global, dispatch, paymentMethod) => {\n  return {\n    paymentMethod\n  }\n});\n\naddReducer('updateBuiltonSession', (global, dispatch, builtonSession , setLocalStorage = true) => {\n  if (setLocalStorage) {\n    setBuiltonSession(builtonSession);\n  }\n  return {\n    builtonSession\n  };\n});\n\naddReducer('removeItemFromBag', (global, dispatch, itemId) => {\n  const bag = getBag();\n  for (let i = 0; i < bag.length; i += 1) {\n    if (bag[i].size._id.$oid === itemId) {\n      bag.splice(i, 1);\n      break;\n    }\n  }\n  setBag(bag);\n  return {\n    bag\n  }\n});\n\naddReducer('clearCheckout', async (global, dispatch) => {\n  await dispatch.updateOrder(DEFAULT_ORDER);\n  await dispatch.updatePaymentMethod(null);\n  await dispatch.updateCheckoutStep(DEFAULT_CHECKOUT);\n});\n\naddReducer('logout', async (global, dispatch) => {\n  await dispatch.updateUser(null, false);\n  await dispatch.updateBuiltonSession(null, false);\n  await dispatch.updateOrder(DEFAULT_ORDER);\n  await dispatch.updatePaymentMethod(null);\n  await dispatch.clearCheckout();\n});\n\nexport default {\n  init: () => {\n    if (INITIALIZED) {\n      console.log('Authentication already initialized');\n      return;\n    }\n\n    let data = {\n        user: null,\n        builtonSession: null,\n        bag: null,\n        order: DEFAULT_ORDER,\n        paymentMethod: null,\n        checkout: DEFAULT_CHECKOUT\n      };\n\n    try {\n      data = {\n        user: getUser(),\n        builtonSession: getBuiltonSession(),\n        bag: getBag(),\n        checkout: getCheckout() || DEFAULT_CHECKOUT,\n        order: getOrder() || DEFAULT_ORDER,\n        paymentMethod: null,\n      };\n    } catch (err) {\n      clearUser();\n      clearBuiltonSession();\n      clearBag();\n    }\n\n    // Setting values in global store\n    setGlobal(data);\n\n    INITIALIZED = true;\n  },\n  updateSession: (session) => {\n    setBuiltonSession(session)\n  },\n  clear: () => {\n    clearAllFields();\n    resetGlobal();\n  },\n  logout: async () => {\n    clearUser();\n    clearBuiltonSession();\n    clearOrder();\n    clearCheckout();\n    await getDispatch().logout();\n\n\n    INITIALIZED = false;\n  }\n};\n","import config from './keys';\n\nexport default config;\n","import firebase from \"firebase/app\";\nimport 'firebase/auth';\nimport config from '../config';\n\nfirebase.initializeApp({\n  apiKey: config.firebase.apiKey,\n  authDomain: config.firebase.authDomain,\n});\n\nexport default firebase;\n","import Builton from '@builton/core-sdk';\nimport globalState from \"../globalStore/globalState\";\nimport { getFieldCurry } from '../globalStore/localStorage';\nimport firebase from './firebase';\nimport config from '../config';\n\nglobalState.init();\n\nconst builtonSession = getFieldCurry('builtonSession')();\n\nconst BuiltonClient = new Builton({\n  ...(builtonSession && { bearerToken: builtonSession }),\n  refreshTokenFn: () => {\n    return new Promise(async (resolve, reject) => {\n      const user = firebase.auth().currentUser;\n      if (user) {\n        const idToken = await user.getIdToken();\n        resolve(idToken);\n      } else {\n        const unsubscribe = firebase.auth().onAuthStateChanged(async (user) => {\n          unsubscribe();\n          if (user) {\n            const idToken = await user.getIdToken();\n            resolve(idToken);\n          } else {\n            const error = new Error('User is not authenticated');\n            reject(error);\n          }\n        });\n      }\n    });\n    },\n  endpoint: config.endpoint,\n  apiKey: config.apiKey,\n});\n\nexport default BuiltonClient;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n\nconst BLogo = ({ width, height}) => {\n  return (\n    <svg width={width} height={height} x=\"0px\" y=\"0px\" viewBox=\"0 0 753.24 190.98\">\n      <rect x=\"351.3\" className=\"st0\" width=\"34.72\" height=\"63.18\"/>\n      <path style={{fill: '#FB6B40'}} d=\"M63.62,156.35c-15.99,0-28.99-13.01-28.99-28.99H0c0,35.08,28.54,63.62,63.62,63.62s63.62-28.54,63.62-63.62\nH92.62C92.62,143.34,79.61,156.35,63.62,156.35z\"/>\n      <rect x=\"409.02\" y=\"63.18\" style={{fill: '#FB6B40'}} width=\"34.64\" height=\"63.18\"/>\n      <rect x=\"235.89\" y=\"63.18\" style={{fill: '#FB6B40'}} width=\"34.64\" height=\"63.18\"/>\n      <rect x=\"625.89\" y=\"126.35\" style={{fill: '#FB6B40'}} width=\"34.64\" height=\"63.18\"/>\n      <rect x=\"293.65\" y=\"126.35\" style={{fill: '#FB6B40'}} width=\"34.64\" height=\"63.18\"/>\n      <polygon style={{fill: '#1A172F'}} points=\"443.85,0 409.12,0 409.12,34.72 409.16,34.72 409.16,63.18 472.34,63.18 472.34,34.72 443.85,34.72\n\"/>\n      <polygon style={{fill: '#1A172F'}}\n               points=\"0.07,64.08 0.07,127.25 34.57,127.25 34.57,64.08 34.57,0.9 0.07,0.9 \t\t\"/>\n      <path style={{fill: '#1A172F'}} d=\"M547.95,155.35c-15.99,0-28.99-13.01-28.99-28.99h-34.63c0,35.08,28.54,63.62,63.62,63.62\ns63.62-28.54,63.62-63.62h-34.63C576.95,142.34,563.94,155.35,547.95,155.35z\"/>\n      <rect x=\"143.28\" y=\"63.18\" style={{fill: '#1A172F'}} width=\"34.64\" height=\"63.18\"/>\n      <path style={{fill: '#1A172F'}} d=\"M689.62,62.73c-35.08,0-63.62,28.54-63.62,63.62h34.63c0-15.99,13.01-28.99,29-28.99\nc15.99,0,28.99,13.01,28.99,28.99h34.63C753.24,91.27,724.7,62.73,689.62,62.73z\"/>\n      <rect x=\"293.65\" y=\"63.18\" style={{fill: '#1A172F'}} width=\"34.64\" height=\"63.18\"/>\n      <rect x=\"351.3\" y=\"126.35\" style={{fill: '#1A172F'}} width=\"34.72\" height=\"63.18\"/>\n      <rect x=\"293.61\" style={{fill: '#AA9AF0'}} width=\"34.72\" height=\"34.72\"/>\n      <path style={{fill: '#AA9AF0'}} d=\"M206.91,155.35c-15.99,0-28.99-13.01-28.99-28.99h-34.63c0,35.08,28.54,63.62,63.62,63.62\nc35.08,0,63.62-28.54,63.62-63.62H235.9C235.9,142.34,222.9,155.35,206.91,155.35z\"/>\n      <path style={{fill: '#AA9AF0'}} d=\"M547.95,62.83c-35.08,0-63.62,28.54-63.62,63.62h34.63c0-15.99,13.01-28.99,28.99-28.99\ns28.99,13.01,28.99,28.99h34.63C611.57,91.37,583.03,62.83,547.95,62.83z\"/>\n      <path style={{fill: '#AA9AF0'}}\n            d=\"M443.65,126.35h-34.63c0,35.08,28.54,63.62,63.62,63.62v-34.63C456.66,155.35,443.65,142.34,443.65,126.35z\"\n      />\n      <rect x=\"718.5\" y=\"126.35\" style={{fill: '#AA9AF0'}} width=\"34.64\" height=\"63.18\"/>\n      <rect x=\"351.3\" y=\"63.18\" style={{fill: '#AA9AF0'}} width=\"34.72\" height=\"63.18\"/>\n      <path style={{fill: '#AA9AF0'}} d=\"M63.62,63.73C28.54,63.73,0,92.27,0,127.35h34.63c0-15.99,13.01-28.99,28.99-28.99s28.99,13.01,28.99,28.99\nh34.63C127.25,92.27,98.7,63.73,63.62,63.73z\"/>\n    </svg>\n  )\n};\n\nBLogo.defaultProps = {\n  width: 320,\n  height: 390,\n}\n\nBLogo.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number\n};\n\nexport default BLogo;\n","import React from \"react\";\nimport Blogo from \"../../assets/icons/b_logo\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\n\nconst BuiltonLogo = ({ style }) => (\n  <div className=\"top-header-title-container\" style={style}>\n    <Blogo width={82} height={36} />\n    <span className=\"demo-store-title\">Demo store</span>\n  </div>\n);\n\nBuiltonLogo.defaultProps = {\n  style: PropTypes.obj\n};\n\nexport default BuiltonLogo;\n","import React, { useRef, useEffect } from \"react\";\nimport ReactCursorPosition, {\n  INTERACTIONS\n} from \"react-cursor-position\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\n\nconst HeaderDropdown = ({ children, open, style }) => {\n  const containerRef = useRef(null);\n  const cursorPosRef = useRef(null);\n  useEffect(() => {\n    setTimeout(() => {\n      if (open) {\n        containerRef.current.classList.add(\"show-action\");\n      } else {\n        if (cursorPosRef.current) {\n          if (!cursorPosRef.current.state.isActive) {\n            containerRef.current.classList.remove(\"show-action\");\n          }\n        }\n      }\n    }, 50);\n  });\n\n  return (\n    <ReactCursorPosition\n      className=\"main-cursor-container\"\n      ref={cursorPosRef}\n      hoverOffDelayInMs={50}\n      activationInteractionMouse={INTERACTIONS.HOVER}\n      activationInteractionTouch={INTERACTIONS.TAP}\n      onActivationChanged={({ isActive }) => {\n        if (containerRef && containerRef.current) {\n          if (!isActive) {\n            containerRef.current.classList.remove(\"show-action\");\n          } else {\n            containerRef.current.classList.add(\"show-action\");\n          }\n        }\n      }}\n    >\n      <div\n        ref={containerRef}\n        className={`header-action-container`}\n        style={style}\n      >\n        {children}\n      </div>\n    </ReactCursorPosition>\n  );\n};\n\nHeaderDropdown.defaultProps = {\n  open: false\n};\n\nHeaderDropdown.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.arrayOf(PropTypes.node)\n  ]),\n  style: PropTypes.object,\n  open: PropTypes.bool\n};\n\nexport default HeaderDropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Cart = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    <path fill={color} d=\"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 3c0 .55.45 1 1 1h1l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h11c.55 0 1-.45 1-1s-.45-1-1-1H7l1.1-2h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.67-1.43c-.16-.35-.52-.57-.9-.57H2c-.55 0-1 .45-1 1zm16 15c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z\"/>\n  </svg>\n);\n\nCart.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nCart.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default Cart;\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst CloseIcon = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    <path fill={color} d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"/>\n  </svg>\n);\n\nCloseIcon.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nCloseIcon.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default CloseIcon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MenuIcon = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    <path fill={color} d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"/>\n  </svg>\n);\n\nMenuIcon.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nMenuIcon.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default MenuIcon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Account = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path fill={color} d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/>\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n  </svg>\n);\n\nAccount.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nAccount.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default Account;\n\n\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.scss\";\n\nconst DropdownMenu = ({ children }) => (\n  <div className=\"dropdown-menu-container\">{children}</div>\n);\n\nDropdownMenu.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.arrayOf(PropTypes.node)\n  ]).isRequired\n};\n\nexport default DropdownMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.scss\";\n\nconst DropdownMenuItem = ({ onClick, children }) => (\n  <div className=\"dropdown-menu-item\" onClick={onClick}>\n    {children}\n  </div>\n);\n\nDropdownMenuItem.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.arrayOf(PropTypes.node)\n  ]).isRequired,\n  onClick: PropTypes.func\n};\n\nexport default DropdownMenuItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MyAccount = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    <path fill={color} d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z\"/>\n  </svg>\n);\n\nMyAccount.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nMyAccount.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default MyAccount;\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst SignOut = ({height, width, color}) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={width} height={height} viewBox=\"0 0 24 24\">\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    <path fill={color} d=\"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/>\n  </svg>\n);\n\nSignOut.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nSignOut.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default SignOut;\n\n","const getProductName = productName => {\n  if (!!~productName.indexOf(\"-\")) {\n    const index = productName.indexOf(\"-\");\n    return productName.substr(0, index).trim();\n  }\n\n  return productName;\n};\n\nconst getSneakersSizes = product => {\n  const prod = product.constructor === Array ? product : product._sub_products;\n  if (prod.length > 0) {\n    return prod.map(subProd => {\n      if (!!~subProd.short_description.toLowerCase().indexOf('size - ')) {\n        return {\n          id: subProd._id.$oid,\n          product: subProd,\n          size: subProd.short_description.slice(subProd.short_description.toLowerCase().indexOf('size - ') + 'size - '.length)\n        }\n      }\n      return true;\n    })\n  }\n  return [];\n};\n\nconst getSneakersSize = subProduct => {\n  return subProduct.short_description.slice(subProduct.short_description.toLowerCase().indexOf('size - ') + 'size - '.length)\n};\n\nexport { getProductName, getSneakersSizes, getSneakersSize };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst RemoveShopping = ({height, width, color}) => (\n  <svg  width={width} height={height} viewBox=\"0 0 24 24\">\n    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    <path fill={color} d=\"M.71 1.83c-.39.39-.39 1.02 0 1.41l3.68 3.68 2.21 4.66-1.35 2.45c-.19.33-.28.73-.24 1.15.1 1.06 1.06 1.82 2.12 1.82h7.33l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84l2.13 2.13c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L2.12 1.83c-.39-.39-1.02-.39-1.41 0zM7 15l1.1-2h2.36l2 2H7zm9.05-2.06c.54-.14.99-.49 1.25-.97l3.58-6.49C21.25 4.82 20.76 4 20 4H7.12l8.93 8.94zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z\"/>\n  </svg>\n\n);\n\nRemoveShopping.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nRemoveShopping.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default RemoveShopping;\n\n\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\n\nconst Spinner = ({ width, height }) => (\n  <div className=\"loader\" style={{ width, height }} />\n);\n\nSpinner.defaultProps = {\n  width: 24,\n  height: 24\n};\n\nSpinner.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number\n};\n\nexport default Spinner;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\nimport Spinner from \"../Spinner\";\n\nconst Button = ({ loading, type, style, className, title, onClick }) => (\n  <button\n    disabled={loading}\n    type={type}\n    style={style}\n    className={className}\n    onClick={onClick}\n  >\n    {loading ? <Spinner /> : <span>{title}</span>}\n  </button>\n);\n\nButton.defaultProps = {\n  type: \"submit\",\n  className: \"button\"\n};\n\nButton.propTypes = {\n  loading: PropTypes.bool,\n  type: PropTypes.string,\n  style: PropTypes.object,\n  className: PropTypes.string,\n  title: PropTypes.string,\n  onClick: PropTypes.func\n};\n\nexport default Button;\n","const checkIfMobile = () => {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  );\n};\n\nexport { checkIfMobile };\n","import React, { useState, useEffect } from \"react\";\nimport HeaderDropdown from \"../HeaderDropdown\";\nimport Cart from \"../../assets/icons/cart\";\nimport CloseIcon from \"../../assets/icons/closeIcon\";\nimport MenuIcon from \"../../assets/icons/menuIcon\";\nimport globalState from \"../../globalStore/globalState\";\nimport { useDispatch, useGlobal } from \"reactn\";\nimport useReactRouter from \"use-react-router\";\nimport Account from \"../../assets/icons/person\";\nimport DropdownMenu from \"../DropdownMenu\";\nimport DropdownMenuItem from \"../DropdownMenuItem\";\nimport MyAccount from \"../../assets/icons/my_account\";\nimport SignOut from \"../../assets/icons/log_out\";\nimport { getSneakersSize } from \"../../utils/productModifiers\";\nimport RemoveShopping from \"../../assets/icons/remove_shopping\";\nimport Button from \"../Button\";\nimport './index.scss';\nimport {checkIfMobile} from \"../../utils/mobile\";\n\nconst Menu = () => {\n  const [cartOpen, setCartOpen] = useState(false);\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\n\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  const [user] = useGlobal(\"user\");\n  const [bag] = useGlobal(\"bag\");\n  const removeItemFrombag = useDispatch(\"removeItemFromBag\"); //reducer\n\n  const { history } = useReactRouter();\n\n  useEffect(() => {\n    document.body.style.overflow = menuOpen ? 'hidden' : 'auto';\n  }, [menuOpen]);\n\n  const removeItem = (itemId, ev) => {\n    ev.stopPropagation();\n    removeItemFrombag(itemId);\n  };\n\n  const calculateTotalAmount = () => {\n    let total = 0;\n    for (let i = 0; i < bag.length; i += 1) {\n      total += bag[i].product.final_price;\n    }\n    return total;\n  };\n\n  const renderLogoutContainer = () => {\n    return (\n      <>\n        <button\n          className=\"header-box-hyperlink\"\n          onClick={e => {\n            if (!user) history.push('/auth');\n            user && e.preventDefault();\n          }}\n          onMouseEnter={() => {\n            user && setUserMenuOpen(true);\n          }}\n          onMouseLeave={() => {\n            user && setUserMenuOpen(false);\n          }}\n        >\n          <span>\n            {user ? (\n              <div>{user.email}</div>\n            ) : (\n              <Account width={18} height={18} color=\"black\" />\n            )}\n          </span>\n        </button>\n        <button\n          type=\"button\"\n          className=\"header-box-hyperlink cart\"\n          onClick={() => checkIfMobile() && setCartOpen(!cartOpen)}\n          onMouseEnter={() => !checkIfMobile() && setCartOpen(true)}\n          onMouseLeave={() => !checkIfMobile() && setCartOpen(false)}\n        >\n          <span>\n            <Cart width={18} height={18} color=\"black\" />{\" \"}\n            <span className=\"cart-count\">{(bag && bag.length) || 0}</span>\n          </span>\n        </button>\n        <HeaderDropdown open={userMenuOpen}>\n          <DropdownMenu>\n            <DropdownMenuItem\n              onClick={() => {\n                history.push(\"/my-account/my-profile\");\n              }}\n            >\n              <span>My Account</span>\n              <MyAccount color=\"#c5c5c5\" />\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() => {\n                globalState.logout();\n                // Force refresh of the header\n                history.push(\"/\");\n              }}\n            >\n              <span>Logout</span>\n              <SignOut color=\"#c5c5c5\" />\n            </DropdownMenuItem>\n          </DropdownMenu>\n        </HeaderDropdown>\n      </>\n    );\n  };\n\n  const renderCartContainer = () => {\n    return (\n      <DropdownMenu>\n        {bag && bag.length > 0 ? (\n          <>\n            {bag.map((prod, index) => (\n              <DropdownMenuItem\n                key={`bag-product-${prod.size._id.$oid}${index}`}\n                onClick={() =>\n                  history.push(\n                    `/product_list/${prod.category}/${prod.product._id.$oid}`\n                  )\n                }\n              >\n                <div className=\"bag-product-row\">\n                  <div>{prod.product.name}</div>\n                  <div>{`Size ${getSneakersSize(prod.size)}`}</div>\n                  <div>\n                    {prod.product.final_price} {prod.product.currency}\n                  </div>\n                  <div\n                    className=\"remove-bag-item\"\n                    onClick={ev => removeItem(prod.size._id.$oid, ev)}\n                  >\n                    <RemoveShopping color=\"#c5c5c5\" />\n                  </div>\n                </div>\n              </DropdownMenuItem>\n            ))}\n            <div className=\"header-checkout-container\">\n              <Button\n                onClick={() => {\n                  history.push(\"/checkout/bag\");\n                }}\n                type=\"button\"\n                className=\"button round\"\n                title=\"Proceed to checkout\"\n                style={{\n                  padding: \"4px 12px\",\n                  height: 40,\n                  fontSize: \"0.72rem\"\n                }}\n              />\n              <div className=\"header-bag-amount\">\n                {calculateTotalAmount()} {bag[0].product.currency}\n              </div>\n            </div>\n          </>\n        ) : (\n          <div className=\"empty-bag-container\">No items in the bag.</div>\n        )}\n      </DropdownMenu>\n    );\n  };\n\n  const renderResponsiveMenu = () => {\n    return (\n      <>\n        <div className=\"responsive-actions-container\">\n          <button\n            type=\"button\"\n            className=\"header-box-hyperlink cart\"\n            onMouseEnter={() => setCartOpen(true)}\n            onMouseLeave={() => setCartOpen(false)}\n          >\n          <span>\n            <Cart width={18} height={18} color=\"black\" />{\" \"}\n            <span className=\"cart-count\">{(bag && bag.length) || 0}</span>\n          </span>\n          </button>\n          <HeaderDropdown open={cartOpen}>{renderCartContainer()}</HeaderDropdown>\n          <div className=\"menu-button-container\">\n            <div className=\"menu-button\" onClick={() => setMenuOpen(!menuOpen)}>\n              {menuOpen ? <CloseIcon /> : <MenuIcon />}\n            </div>\n          </div>\n        </div>\n        <div\n          className={`responsive-menu ${\n            menuOpen ? \"responsive-menu-open\" : \"responsive-menu-closed\"\n          }`}\n        >\n          {user &&\n            <div className=\"internal-menu-items\">\n              <div className=\"header-title\">{user.email}</div>\n              <button\n                className=\"header-box-hyperlink\"\n                onClick={e => {\n                  e.preventDefault();\n                  setMenuOpen(false);\n                  history.push(\"/my-account/my-profile\");\n                }}\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <span>My Account</span>\n              </button>\n              <button\n                className=\"header-box-hyperlink\"\n                onClick={e => {\n                  e.preventDefault();\n                  setMenuOpen(false);\n                  globalState.logout();\n                  history.push(\"/\");\n                }}\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <span>Log out</span>\n              </button>\n            </div>\n          }\n          {!user &&\n            <div className=\"internal-menu-items\">\n              <button\n                 className=\"header-box-hyperlink\"\n                 onClick={(e) => {\n                e.preventDefault();\n                history.push('/auth')\n              }}\n              >\n              Log in\n              </button>\n            </div>\n          }\n          <div className=\"external-menu-items\">\n            <div>\n              <a\n                href=\"https://builton.dev\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <span>Website</span>\n              </a>\n            </div>\n            <div>\n              <a\n                href=\"https://docs.builton.dev\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <span>Docs</span>\n              </a>\n            </div>\n            <div>\n              <a\n                href=\"https://dashboard.builton.dev/\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <span>Dashboard</span>\n              </a>\n            </div>\n            <div>\n              <a\n                href=\"https://github.com/BuiltonDev/builton-demo-store\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <span>Github</span>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div\n          className={`responsive-menu-backdrop ${\n            menuOpen ? \"backdrop-open\" : \"backdrop-close\"\n          }`}\n          onClick={() => setMenuOpen(false)}\n        />\n      </>\n    )\n  };\n\n  const renderMenu = () => {\n    return (\n      <div className=\"top-header-menu-container\">\n        <a\n          className=\"header-box-hyperlink\"\n          href=\"https://builton.dev\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n        >\n          <span>Website</span>\n        </a>\n        <a\n          className=\"header-box-hyperlink\"\n          href=\"https://docs.builton.dev\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n        >\n          <span>Docs</span>\n        </a>\n        <a\n          className=\"header-box-hyperlink\"\n          href=\"https://dashboard.builton.dev/\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n        >\n          <span>Dashboard</span>\n        </a>\n        <a\n          className=\"header-box-hyperlink\"\n          href=\"https://github.com/BuiltonDev/builton-demo-store\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n        >\n          <span>Github</span>\n        </a>\n        <span className=\"dropdown-container\">{renderLogoutContainer()}</span>\n        <HeaderDropdown open={cartOpen}>{renderCartContainer()}</HeaderDropdown>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"main-menu-container\">\n      {renderMenu()}\n      {renderResponsiveMenu()}\n    </div>\n  );\n};\n\nexport default Menu;\n","import React from \"react\";\nimport useReactRouter from 'use-react-router';\nimport BuiltonLogo from \"../BuiltonLogo\";\n\nimport \"./index.scss\";\nimport Menu from \"../Menu\";\n\nconst Header = React.memo(() => {\n  const { history } = useReactRouter();\n\n  return (\n    <div className=\"header-container\">\n      <div className=\"header-logo-container\" onClick={() => history.push(\"/\")}>\n        <BuiltonLogo />\n      </div>\n      <Menu/>\n    </div>\n  );\n});\n\nexport default Header;\n","import React, { useRef } from \"react\";\nimport ReactCursorPosition from \"react-cursor-position\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\n\nconst ImageCategory = ({\n  imageSrc,\n  category,\n  onLoad,\n  style,\n  onClick,\n  pageLoaded\n}) => {\n  let positionX = 0;\n  let positionY = 0;\n\n  const imageRef = useRef(null);\n\n  const handleImagePosition = el => {\n    if (el.elementDimensions) {\n      const midWidth = el.elementDimensions.width / 2;\n      const midHeight = el.elementDimensions.height / 2;\n      positionX = ((midWidth - el.position.x) * -1) / 60;\n      positionY = ((midHeight - el.position.y) * -1) / 60;\n      imageRef.current.style.transform = `translate(${positionX}px, ${positionY}px) scale(1.02)`;\n    } else {\n      imageRef.current.style.transform = `translate(0px, 0px) scale(1)`;\n    }\n  };\n\n  return (\n    <ReactCursorPosition\n      className={`${pageLoaded ? \"show-category\" : \"hide-category\"}`}\n      onPositionChanged={elementDimension =>\n        handleImagePosition(elementDimension)\n      }\n    >\n      <div\n        onClick={onClick}\n        className={`category-container ${category}-container`}\n      >\n        <div className={`category-title ${category}-title`}>\n          {category.toUpperCase()}\n        </div>\n        <img\n          onLoad={onLoad}\n          ref={imageRef}\n          className=\"category-image\"\n          src={imageSrc}\n          alt={`${category}-illustration`}\n        />\n      </div>\n    </ReactCursorPosition>\n  );\n};\n\nImageCategory.propTypes = {\n  imageSrc: PropTypes.string.isRequired,\n  category: PropTypes.string.isRequired,\n  onLoad: PropTypes.func,\n  pageLoaded: PropTypes.bool,\n  onClick: PropTypes.func\n};\n\nexport default ImageCategory;\n","import { toast } from 'react-toastify';\n\nconst notify = (message, options) => {\n  toast(message, {\n    position: \"top-right\",\n    autoClose: 5000,\n    hideProgressBar: true,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    ...options\n  })\n};\n\nexport default notify;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport BLogo from \"../../assets/icons/b_logo\";\nimport \"./index.scss\";\nimport Spinner from \"../Spinner\";\n\nconst BuiltonSplash = ({ show, backgroundColor }) => {\n  return (\n    <div\n      className={`splash-container ${show ? \"show-splash\" : \"hide-splash\"}`}\n      style={{ backgroundColor }}\n    >\n      <div className=\"splash-content-container\">\n        <BLogo width={240} height={92} />\n        <div className=\"splash-subtitle\">Sneakers Demo Store</div>\n        <div className=\"spinner-container\">\n          <Spinner width={36} height={36} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nBuiltonSplash.defaultProps = {\n  show: true,\n  backgroundColor: \"transparent\"\n};\n\nBuiltonSplash.propTypes = {\n  show: PropTypes.bool,\n  backgroundColor: PropTypes.string\n};\n\nexport default BuiltonSplash;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ArrowLeft = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    <path fill={color} d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"/>\n  </svg>\n);\n\nArrowLeft.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nArrowLeft.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default ArrowLeft;\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ArrowRight = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    <path fill={color} d=\"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z\"/>\n  </svg>\n);\n\nArrowRight.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nArrowRight.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default ArrowRight;\n\n\n","import React, { useRef } from 'react';\n\nconst Image = ({\n  src,\n  onLoad,\n  onError,\n  alt,\n               }) => {\n  const imgRef = useRef(null);\n\n  const checkIfImgCached = () => {\n    return imgRef.current.complete;\n  };\n\n  return (\n    <img\n      ref={imgRef}\n      src={src}\n      onLoad={() => {\n        const isCached = checkIfImgCached();\n        onLoad(isCached)\n      }}\n      onError={onError}\n      alt={alt}\n    />\n  )\n};\n\nexport default Image;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport config from \"../../config\";\nimport Spinner from '../../components/Spinner';\nimport { getProductName } from \"../../utils/productModifiers\";\nimport useReactRouter from 'use-react-router';\n\nimport \"./index.scss\";\nimport ArrowLeft from \"../../assets/icons/arrowLeft\";\nimport ArrowRight from \"../../assets/icons/arrowRight\";\nimport Image from \"../Image\";\n\nconst calcActiveItems = countActiveItems => new Array(countActiveItems).fill(0).map((i, index) => index);\n\nconst Carousel = ({ items, onActiveItemClick, activeItems, breakpoint }) => {\n  const [activeItem, setActiveItem] = useState(calcActiveItems(activeItems));\n  const [loadedItems, setLoadedItems] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n\n  const carouselRef = useRef(null);\n\n  const { match } = useReactRouter();\n\n  const setCarouselItems = () => {\n    const carousel = carouselRef.current;\n    const marginFactor = 12;\n    const maxWidth = (carousel.clientWidth / (activeItem.length + 2)) - marginFactor;\n    for (let i = 0; i < carousel.children.length; i += 1) {\n      carousel.children[i].style.maxWidth = `${maxWidth}px`;\n      for (let x = 0; x < activeItem.length; x += 1) {\n        if (activeItem.includes(i)) {\n          // Active items\n          const left = (100 / (activeItem.length + (window.innerWidth < breakpoint ? 1 : 2 ))) * (x + 1);\n          const leftStyle = window.innerWidth < breakpoint ? `${left}%` : `calc(${left}% + ${marginFactor / 2}px)`;\n\n          carousel.children[activeItem[x]].style.left = leftStyle;\n          carousel.children[activeItem[x]].style.transform = `translate3d(${window.innerWidth < breakpoint ? '-50%' : '0'}, 0, 0)`;\n        } else {\n          if (i === activeItem[activeItem.length - 1] + 1) {\n            // Next item\n            carousel.children[i].style.left = `calc(100% - ${maxWidth}px)`;\n            carousel.children[i].style.transform = `translate3d(${window.innerWidth < breakpoint ? '50%' : '0'}, 0, 0)`;\n          } else if (i === activeItem[0] - 1) {\n            // Previous item\n            carousel.children[i].style.left = `0`;\n            carousel.children[i].style.transform = `translate3d(${window.innerWidth < breakpoint ? '-50%' : '0'}, 0, 0)`;\n          } else if (i > activeItem[activeItem.length - 1] + 1) {\n            // Next items\n            carousel.children[i].style.right = `-${maxWidth}px`;\n            carousel.children[i].style.transform = `translate3d(300%, 0, 0)`;\n          } else {\n            // Previous items\n            carousel.children[i].style.left = `0`;\n            carousel.children[i].style.transform = `translate3d(-300%, 0, 0)`;\n          }\n        }\n      }\n    }\n  };\n\n  const handleResize = () => {\n    if (activeItems >= 2 && window.innerWidth <= 780) {\n      setActiveItem(calcActiveItems(1));\n    } else if (activeItems >= 4 && window.innerWidth <= 1280) {\n      setActiveItem(calcActiveItems(2));\n    } else {\n      setActiveItem(calcActiveItems(activeItems));\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (match.params && match.params.productId) {\n      setLoaded(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [match.params.productId]);\n\n  useEffect(() => {\n    setCarouselItems();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeItem]);\n\n  useEffect(() => {\n    if (items && items.length > 0) {\n      handleResize();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaded]);\n\n  useEffect(() => {\n    if (items && items.length > 0) {\n      setLoadedItems(items.map(item => item.image && item.image.public_url && ({id: item._id.$oid, imageLoaded: false})));\n    } else {\n      if (typeof items === 'undefined') {\n        setLoaded(true);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [items]);\n\n  useEffect(() => {\n    if (!loadedItems.length) return;\n    let hasLoaded = true;\n    for (let i = 0; i < loadedItems.length; i += 1) {\n      if (loadedItems[i] && !loadedItems[i].imageLoaded) {\n        hasLoaded = false;\n        break;\n      }\n    }\n\n    if (hasLoaded) {\n      setLoaded(true);\n    }\n  }, [loadedItems]);\n\n  const handleClick = (prod) => {\n    onActiveItemClick(getProductName(prod.name).toLowerCase(), prod._id.$oid)\n  };\n\n  const pushActiveItem = (activeItemIndex) => {\n    const copyActiveItem = [...activeItem];\n    for (let i = 0; i < copyActiveItem.length; i += 1) {\n      if (activeItemIndex <= copyActiveItem[0]) {\n        copyActiveItem[i] -= 1;\n      } else {\n        copyActiveItem[i] += 1;\n      }\n    }\n    setActiveItem(copyActiveItem);\n  };\n\n  return (\n    <>\n      <div className={`carousel-container ${loaded ? 'show-carousel' : 'hide-carousel'}`} ref={carouselRef} id=\"carousel\">\n        {(items && items.length > 0) && items.map((prod, index) => (\n          prod.image && prod.image.public_url ?\n            <div\n              key={`${prod._id.$oid}-product-${index}`}\n              onClick={() => activeItem.includes(index) ? handleClick(prod) : pushActiveItem(index)}\n              className={`${index < activeItem[0] ? 'previous-active-carousel-item' : ''} ${index > activeItem[activeItem.length - 1] ? 'next-active-carousel-item' : ''}`}\n            >\n              <div className=\"carousel-image-container\">\n                {prod.discount > 0 &&\n                <div className=\"carousel-product-discount-container\">\n                  - {prod.discount * 100} %\n                </div>\n                }\n                <Image\n                  src={prod.image.public_url}\n                  onLoad={(isCached) => {\n                    if (loadedItems[index]) {\n                      loadedItems[index].imageLoaded = true;\n                      setLoadedItems([ ...loadedItems ])\n                    } else if (isCached && !loaded) {\n                      setLoaded(true);\n                    }\n                  }}\n                  onError={() => {\n                    if (loadedItems[index]) {\n                      loadedItems[index].imageLoaded = true;\n                      setLoadedItems([ ...loadedItems ])\n                    }\n                  }}\n                  alt={`${prod.name}-img`}\n                />\n                <div className={`similar-product-title-container ${activeItem.includes(index) ? 'show-title' : 'hide-title'}`}>\n                  <span>{getProductName(prod.name)}</span>\n                </div>\n                <div className=\"carousel-item-overlay\"/>\n                {index < activeItem[0] &&\n                  <div className=\"carousel-left-arrow\">\n                    <ArrowLeft width={36} height={36} color=\"#d5d5d5\" />\n                  </div>\n                }\n                {index > activeItem[activeItem.length - 1] &&\n                <div className=\"carousel-right-arrow\">\n                  <ArrowRight width={36} height={36} color=\"#d5d5d5\" />\n                </div>\n                }\n              </div>\n              <div className={`similar-product-name-container ${activeItem.includes(index) ? 'show-title' : 'hide-title'}`}>\n                <span>{prod.short_description}</span>\n              </div>\n            </div> : <div />\n        ))}\n      </div>\n      {!loaded &&\n        <div className=\"carousel-spinner-container\">\n          <Spinner />\n        </div>\n      }\n      {typeof items === 'undefined' &&\n        <div className=\"carousel-empty\">\n          Nothing to recommend\n        </div>\n      }\n    </>\n  );\n};\n\nconst shouldUpdate = (oldProp, newProp) => {\n  if (typeof newProp.items !== 'undefined') {\n    return newProp.items.length === oldProp.items.length\n  } else {\n    return typeof newProp.items === typeof oldProp.items;\n  }\n};\n\nCarousel.defaultProps = {\n  onActiveItemClick: () => {},\n  activeItems: 1,\n  breakpoint: 1280\n};\n\nCarousel.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.object),\n  onActiveItemClick: PropTypes.func,\n  breakpoint: PropTypes.number,\n  activeItems: PropTypes.number,\n  comparisonProdId: PropTypes.string,\n};\n\nexport default React.memo(Carousel, shouldUpdate);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.scss\";\n\nconst SectionHeader = ({ title, style, type }) => {\n  return (\n    <div className={`section-header-container ${type}`} style={style}>\n      {title}\n    </div>\n  );\n};\n\nSectionHeader.defaultProps = {\n  style: {},\n  type: \"main\"\n};\n\nSectionHeader.propTypes = {\n  title: PropTypes.string.isRequired,\n  style: PropTypes.object,\n  type: PropTypes.oneOf([\"main\", \"sub\"])\n};\n\nexport default SectionHeader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\n\nconst Footer = ({ children, style }) => <div style={style} className=\"footer\">{children}</div>;\n\nFooter.defaultProps = {\n  style: {},\n};\n\nFooter.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.arrayOf(PropTypes.node)\n  ]).isRequired,\n  style: PropTypes.object,\n};\n\nexport default Footer;\n","import React, { useState, useEffect } from \"react\";\nimport builton from \"../../utils/builton\";\nimport Header from \"../../components/Header\";\nimport ImageCategory from \"../../components/ImageCategory\";\nimport { withRouter } from \"react-router-dom\";\nimport notify from \"../../utils/toast\";\nimport config from \"../../config\";\nimport { useGlobal } from \"reactn\";\nimport \"./index.scss\";\nimport BuiltonSplash from \"../../components/BuiltonSplash\";\nimport useReactRouter from \"use-react-router\";\nimport Carousel from \"../../components/Carousel\";\nimport SectionHeader from \"../../components/SectionHeader\";\nimport Footer from \"../../components/Footer\";\nimport globalState from \"../../globalStore/globalState\";\n\nconst Main = () => {\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState({});\n  const [pageLoaded, setPageLoaded] = useState(false);\n  const [popularProducts, setPopularProducts] = useState([]);\n\n  const { history } = useReactRouter();\n  const [user] = useGlobal(\"user\");\n\n  useEffect(() => {\n\n    const fetchRecommendations = async () => {\n      try {\n        const recommendations = await builton.aiModels.getRecommendations(\n          \"5d53b0f91a7e86000fd0d84e\",\n          {\n            data: \"\",\n            options: {\n              size: 7\n            },\n          },\n          {\n            urlParams: {\n              expand: 'product, result.recommendations.product.image'\n            }\n          }\n        );\n\n        if (\n          recommendations.result[0].recommendations &&\n          recommendations.result[0].recommendations.length > 0\n        ) {\n          const recommendedProducts = recommendations.result[0].recommendations.map((recommendedProduct) => {\n            return recommendedProduct.product;\n          });\n\n          setPopularProducts(recommendedProducts.length > 0 ? recommendedProducts : undefined);\n        } else {\n          setPopularProducts(undefined);\n        }\n      } catch (err) {\n        setPopularProducts(undefined);\n        console.error(\"Failed to fetch similar products.\");\n      }\n    };\n\n    const getProducts = async () => {\n      try {\n        const products = await builton.products.get({\n          urlParams: {\n            expand: \"image\",\n            tags: \"category\"\n          }\n        });\n        setProducts(products.current);\n      } catch (err) {\n        notify(\"Failed to load products\", {\n          type: \"error\"\n        });\n      }\n      return false;\n    };\n\n    getProducts();\n    fetchRecommendations();\n  }, []);\n\n  useEffect(() => {\n    if (products) {\n      const cat = {};\n      for (let i = 0; i < products.length; i += 1) {\n        cat[products[i].name.toLowerCase()] = {\n          title: products[i].name.toLowerCase(),\n          image: products[i].image.public_url,\n          loaded: false\n        };\n      }\n      setCategories(cat);\n    }\n  }, [products]);\n\n  useEffect(() => {\n    if (Object.keys(categories).length > 0) {\n      let catLoaded = true;\n      const catValues = Object.values(categories);\n      for (let i = 0; i < catValues.length; i += 1) {\n        if (!catValues[i].loaded) {\n          catLoaded = false;\n          break;\n        }\n      }\n      if (catLoaded) {\n        setPageLoaded(true);\n      }\n    }\n  }, [categories]);\n\n  return (\n    <div className=\"main-container\">\n      <Header />\n      <div className=\"wrapper\">\n        <div className=\"home-wrapper\">\n          <BuiltonSplash show={!pageLoaded} />\n          <div className=\"background-left-fragment\" />\n          {Object.keys(categories).length > 0 && (\n            <>\n              <div className=\"left-category-wrapper\">\n                <ImageCategory\n                  pageLoaded={pageLoaded}\n                  onLoad={() =>\n                    setCategories({\n                      ...categories,\n                      adidas: { ...categories.adidas, loaded: true }\n                    })\n                  }\n                  onClick={() =>\n                    history.push(`product_list/${categories.adidas.title}`)\n                  }\n                  imageSrc={categories.adidas.image}\n                  category={categories.adidas.title}\n                />\n              </div>\n              <div className=\"inner-wrapper\">\n                <ImageCategory\n                  pageLoaded={pageLoaded}\n                  onLoad={() =>\n                    setCategories({\n                      ...categories,\n                      nike: { ...categories.nike, loaded: true }\n                    })\n                  }\n                  onClick={() =>\n                    history.push(`product_list/${categories.nike.title}`)\n                  }\n                  imageSrc={categories.nike.image}\n                  category={categories.nike.title}\n                />\n                <ImageCategory\n                  pageLoaded={pageLoaded}\n                  onLoad={() =>\n                    setCategories({\n                      ...categories,\n                      puma: { ...categories.puma, loaded: true }\n                    })\n                  }\n                  onClick={() =>\n                    history.push(`product_list/${categories.puma.title}`)\n                  }\n                  imageSrc={categories.puma.image}\n                  category={categories.puma.title}\n                />\n              </div>\n            </>\n          )}\n        </div>\n        <div className=\"home-popular-products-container\">\n          <div className=\"home-popular-products-title-container\">\n            <SectionHeader title=\"Most popular products\" type=\"sub\" />\n          </div>\n          <Carousel\n            activeItems={4}\n            items={popularProducts}\n            onActiveItemClick={(category, productId) =>\n              history.push(`/product_list/${category}/${productId}`)\n            }\n          />\n        </div>\n        <div className=\"home-footer-container\">\n          <Footer>\n            <div className=\"home-footer-content\">\n              <div className=\"home-footer-col\">\n                <div className=\"home-footer-col-title\">Quick links</div>\n                <div className=\"home-footer-col-content\">\n                  <div>\n                    <a\n                      href=\"https://builton.dev\"\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\"\n                    >\n                      <span>Website</span>\n                    </a>\n                  </div>\n                  <div>\n                    <a\n                      href=\"https://docs.builton.dev\"\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\"\n                    >\n                      <span>Docs</span>\n                    </a>\n                  </div>\n                  <div>\n                    <a\n                      href=\"https://dashboard.builton.dev/\"\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\"\n                    >\n                      <span>Dashboard</span>\n                    </a>\n                  </div>\n                  <div>\n                    <a\n                      href=\"https://github.com/BuiltonDev/builton-demo-store\"\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\"\n                    >\n                      <span>Github</span>\n                    </a>\n                  </div>\n                </div>\n              </div>\n              <div className=\"home-footer-col\">\n                <div className=\"home-footer-col-title\">Menu</div>\n                <div className=\"home-footer-col-content\">\n                  <button\n                    onClick={e => {\n                      if (!user) {\n                        history.push(\"/auth\");\n                      } else {\n                        globalState.logout();\n                      }\n                    }}\n                  >\n                    <span>\n                      <div>{user ? \"Sign out\" : \"Sign up/in\"}</div>\n                    </span>\n                  </button>\n                </div>\n              </div>\n              <div className=\"home-footer-col\">\n                <div className=\"home-footer-col-title\">About</div>\n                <div className=\"home-footer-col-content\">\n                  <div>\n                    This is a DEMO to showcase Builton.dev API functionality.\n                    The products, prices, payment method, checkout process and\n                    its affiliates are fictional. No charges and deliveries will\n                    be made. For more information please check{\" \"}\n                    <a\n                      href=\"https://builton.dev\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Builton.dev\n                    </a>{\" \"}\n                    website.\n                  </div>\n                </div>\n              </div>\n            </div>\n          </Footer>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(Main);\n","import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.scss\";\n\nconst Input = ({\n  inputProps,\n  submitting,\n  placeholder,\n  id,\n  colorScheme,\n  debounce,\n  leftAdornment,\n  loading\n}) => {\n  let debouncedValue;\n  let timeout;\n  const handleInputChange = (ev, input) => {\n    if (input.onChange) {\n      if (debounce) {\n        ev.persist();\n        if (debouncedValue !== ev.target.value) {\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n          timeout = setTimeout(() => {\n            input.onChange(ev.target.value);\n          }, debounce);\n        }\n      } else {\n        input.onChange(ev.target.value, ev);\n      }\n    }\n    if (ev.target.value) {\n      ev.target.parentNode.classList.add(\"input--filled\");\n    } else {\n      ev.target.parentNode.classList.remove(\"input--filled\");\n    }\n  };\n\n  useEffect(() => {\n    if (typeof inputProps.value !== \"undefined\" && inputProps.value !== \"\") {\n      document.getElementById(id).parentNode.classList.add(\"input--filled\");\n    }\n  });\n\n  return (\n    <>\n      {leftAdornment && <div className=\"left-adornment\">{leftAdornment}</div>}\n      <input\n        {...inputProps}\n        disabled={submitting}\n        onChange={ev => handleInputChange(ev, inputProps)}\n        className=\"input__field\"\n        id={id}\n        style={{ ...(leftAdornment && { paddingLeft: 28 }) }}\n      />\n      <label\n        className={`input__label input__label-color-${colorScheme}`}\n        htmlFor={id}\n        style={{ ...(leftAdornment && { paddingLeft: 28, top: 10 }) }}\n      >\n        <div\n          className={`input-loading-container ${\n            loading ? \"input-loading\" : \"\"\n          }`}\n        >\n          <div className=\"input-loading-1\" />\n          <div className=\"input-loading-2\" />\n          <div className=\"input-loading-3\" />\n          <div className=\"input-loading-4\" />\n        </div>\n        <span className=\"input__label-content\">{placeholder}</span>\n      </label>\n    </>\n  );\n};\n\nInput.defaultProps = {\n  loading: false\n};\n\nInput.propTypes = {\n  inputProps: PropTypes.object.isRequired,\n  colorScheme: PropTypes.number,\n  submitting: PropTypes.bool,\n  placeholder: PropTypes.string,\n  id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  debounce: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  leftAdornment: PropTypes.node,\n  loading: PropTypes.bool\n};\n\nexport default Input;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\n\nconst Hyperlink = ({ onClick, title }) => (\n  <button type=\"button\" className=\"link-button\" onClick={onClick}>\n    {title}\n  </button>\n);\n\nHyperlink.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired\n};\n\nexport default Hyperlink;\n","import firebase from '../utils/firebase';\nimport builton from \"./builton\";\n\nconst setFirebaseToken = async () => {\n  const fbUserPromise =  new Promise((resolve, reject) => {\n    const user = firebase.auth().currentUser;\n    if (user) {\n      resolve(user);\n    } else {\n      const unsubscribe = firebase.auth().onAuthStateChanged(function(user) {\n        unsubscribe();\n        if (user) {\n          resolve(user);\n        } else {\n          const error = new Error('User is not authenticated');\n          reject(error);\n        }\n      });\n    }\n  });\n\n  try {\n    const fbPromise = await fbUserPromise;\n    const idToken = await fbPromise.getIdToken();\n    await builton.refreshBearerToken(idToken);\n    return idToken;\n  } catch(err) {\n    return new Error('Failed to get idToken')\n  }\n};\n\nexport { setFirebaseToken };\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Field, Form } from \"react-final-form\";\nimport Input from \"../../../components/Input\";\nimport Hyperlink from \"../../../components/Hyperlink\";\nimport Button from \"../../../components/Button\";\nimport firebaseClient from \"../../../utils/firebase\";\nimport { setFirebaseToken } from \"../../../utils/auth\";\nimport builton from \"../../../utils/builton\";\nimport notify from \"../../../utils/toast\";\nimport { useDispatch } from \"reactn\";\n\nconst AuthForm = ({ onAuth }) => {\n  const [formType, setFormType] = useState(\"login\");\n  const updateUser = useDispatch(\"updateUser\"); //reducer\n  const updateBuiltonSession = useDispatch(\"updateBuiltonSession\");\n\n  const Error = ({ name }) => (\n    <div className=\"form-error-container\">\n      <Field name={name} subscription={{ error: true, touched: true }}>\n        {({ meta: { error, touched } }) =>\n          error && touched ? <span>{error}</span> : null\n        }\n      </Field>\n    </div>\n  );\n\n  const validate = values => {\n    const errors = {};\n    if (formType === \"register\") {\n      if (!values.email) {\n        errors.email = \"Required\";\n      }\n      if (!values.password) {\n        errors.password = \"Required\";\n      }\n      if (!values.confirmPassword) {\n        errors.confirmPassword = \"Required\";\n      }\n\n      if (values.confirmPassword !== values.password) {\n        errors.confirmPassword = \"Passwords do not match\";\n      }\n    }\n    return errors;\n  };\n\n  const onSubmit = async values => {\n    try {\n      if (formType === \"register\") {\n        await firebaseClient\n          .auth()\n          .createUserWithEmailAndPassword(values.email, values.password);\n      } else {\n        await firebaseClient\n          .auth()\n          .signInWithEmailAndPassword(values.email, values.password);\n      }\n\n      const idToken = await setFirebaseToken();\n      await updateBuiltonSession(idToken);\n\n      let apiUser;\n\n      if (formType === \"register\") {\n        apiUser = await builton.users.authenticate({\n            email: values.email\n        });\n      } else {\n        apiUser = await builton.users.setMe().get();\n      }\n\n      await updateUser(apiUser);\n\n      if (!apiUser) {\n        throw new Error(\"Missing user data\");\n      }\n\n      onAuth();\n    } catch (err) {\n      notify(\n        `Failed to ${\n          formType === \"login\" ? \"Login\" : \"Register\"\n        }. Please try again.`,\n        { type: \"error\" }\n      );\n    }\n  };\n\n  return (\n    <Form onSubmit={onSubmit} validate={values => validate(values)}>\n      {({ handleSubmit, submitting }) => (\n        <form onSubmit={handleSubmit} className=\"form-container\">\n          <div className=\"input\">\n            <Field\n              name=\"email\"\n              type=\"email\"\n              render={({ input }) => (\n                <Input\n                  id=\"input-1\"\n                  inputProps={{\n                    ...input,\n                    autoComplete: \"username email\"\n                  }}\n                  submitting={submitting}\n                  colorScheme={1}\n                  placeholder=\"Email\"\n                />\n              )}\n            />\n            <Error name=\"email\" />\n          </div>\n          <div className=\"input\">\n            <Field\n              name=\"password\"\n              type=\"password\"\n              render={({ input }) => (\n                <Input\n                  id=\"input-2\"\n                  inputProps={{\n                    ...input,\n                    autoComplete: \"new-password\"\n                  }}\n                  submitting={submitting}\n                  colorScheme={2}\n                  placeholder=\"Password\"\n                />\n              )}\n            />\n            <Error name=\"password\" />\n          </div>\n          <div\n            className={`input input ${\n              formType === \"register\" ? \"show-field\" : \"hide-field\"\n            }`}\n          >\n            <Field\n              name=\"confirmPassword\"\n              type=\"password\"\n              autoComplete=\"new-password\"\n              render={({ input }) => (\n                <Input\n                  id=\"input-3\"\n                  inputProps={{\n                    ...input,\n                    autoComplete: \"new-password\"\n                  }}\n                  submitting={submitting}\n                  colorScheme={2}\n                  placeholder=\"Confirm Password\"\n                />\n              )}\n            />\n            <Error name=\"confirmPassword\" />\n          </div>\n          <div className=\"buttons\">\n            <Hyperlink\n              onClick={() =>\n                setFormType(formType === \"register\" ? \"login\" : \"register\")\n              }\n              title={formType === \"register\" ? \"Login\" : \"Register\"}\n            />\n            <Button\n              type=\"submit\"\n              className=\"button round\"\n              loading={submitting}\n              title={formType === \"register\" ? \"Register\" : \"Login\"}\n            />\n          </div>\n        </form>\n      )}\n    </Form>\n  );\n};\n\nAuthForm.propTypes = {\n  onAuth: PropTypes.func.isRequired\n};\n\nexport default AuthForm;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"./index.scss\";\nimport BuiltonLogo from \"../../components/BuiltonLogo\";\nimport AuthForm from \"./authForm\";\nimport userReactRouter from 'use-react-router';\n\nconst Auth = () => {\n  const { history } = userReactRouter();\n  return (\n    <div className=\"auth-wrapper\">\n      <a href=\"/\">\n        <BuiltonLogo style={{ position: \"absolute\", top: 12, left: 48 }} />\n      </a>\n      <div className=\"paper-container\">\n        <AuthForm onAuth={() => {\n          history.push('/');\n        }} />\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(Auth);\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Search = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path fill={color} d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n  </svg>\n);\n\nSearch.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nSearch.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default Search;\n\n\n\n\n","import { useRef, useEffect } from 'react';\n\nfunction useEventListener(eventName, handler, element = window) {\n  // Create a ref that stores handler\n  const savedHandler = useRef();\n\n  // Update ref.current value if handler changes.\n  // This allows our effect below to always get latest handler ...\n  // ... without us needing to pass it in effect deps array ...\n  // ... and potentially cause effect to re-run every render.\n  useEffect(() => {\n    savedHandler.current = handler;\n  }, [handler]);\n\n  useEffect(\n    () => {\n      // Make sure element supports addEventListener\n      // On\n      const isSupported = element && element.addEventListener;\n      if (!isSupported) return;\n\n      // Create event listener that calls handler function stored in ref\n      const eventListener = event => savedHandler.current(event);\n\n      // Add event listener\n      element.addEventListener(eventName, eventListener);\n\n      // Remove event listener on cleanup\n      return () => {\n        element.removeEventListener(eventName, eventListener);\n      };\n    },\n    [eventName, element] // Re-run if eventName or element changes\n  );\n}\n\nexport default useEventListener;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst FilterIcon = ({height, width, color}) => (\n  <svg width={width} height={height} viewBox=\"0 0 24 24\">\n    <path fill={color} d=\"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z\"/>\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n  </svg>\n);\n\nFilterIcon.defaultProps = {\n  width: 24,\n  height: 24,\n  color: 'black'\n};\n\nFilterIcon.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  color: PropTypes.string,\n};\n\nexport default FilterIcon;\n","import React, { useRef, useState } from 'react';\nimport useEventListener from \"../../hooks/useEventListener\";\nimport PropTypes from 'prop-types';\nimport FilterIcon from \"../../assets/icons/filterIcon\";\n\nimport './index.scss';\n\nconst Filter = ({ filterOptions, renderOption, onFilter }) => {\n  const contentRef = useRef(null);\n\n  const [filterOpen, setFilterOpen] = useState(false);\n  const [filteredItems, setFilteredItems] = useState([]);\n\n  const handleOutsideClick = (e) => {\n    if(!contentRef.current.contains(e.target) && filterOpen) {\n      setFilterOpen(false);\n      onFilter(filteredItems);\n    }\n  };\n\n  useEventListener('mousedown', handleOutsideClick);\n\n  const setFilter = (option) => {\n    const items = [ ...filteredItems ];\n    if (items.length > 0) {\n      if (items.includes(option)) {\n        items.splice(items.indexOf(option), 1);\n      } else {\n        items.push(option);\n      }\n    } else {\n      items.push(option);\n    }\n\n    setFilteredItems(items);\n  };\n\n  return (\n    <div className=\"filter-container\">\n      <div\n        className={`filter-button ${filterOpen ? 'active-button' : ''}`}\n        onClick={() => setFilterOpen(true)}\n      >\n        <FilterIcon />\n      </div>\n      <div className={`filter-main-container ${filterOpen ? 'show-filter' : 'hide-filter'}`}>\n        <div ref={contentRef} className=\"filter-inner-container\">\n          {filterOptions && filterOptions.map((category, index) => (\n            <div key={`filter-category-${index}`} className=\"filter-category-container\">\n              {!!category.title && <div className=\"filter-category-title\">{category.title}</div>}\n              {category.options.map((option, indx) => (\n                <div className={`filter-category-item ${filteredItems.includes(option) ? 'selected-item' : ''}`} key={`option-${indx}`} onClick={() => setFilter(option)}>\n                  {typeof option === \"object\" ? option[renderOption] : option}\n                </div>\n              ))}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n};\n\nFilter.defaultProps = {\n  renderOption: '',\n};\n\nFilter.propTypes = {\n  onFilter: PropTypes.func.isRequired,\n  renderOption: PropTypes.string,\n  filterOptions: PropTypes.array.isRequired,\n};\n\nexport default React.memo(Filter);\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\nimport Input from \"../Input\";\nimport Search from \"../../assets/icons/search\";\nimport Filter from '../../components/Filter';\nimport builton from \"../../utils/builton\";\nimport notify from \"../../utils/toast\";\nimport {getSneakersSizes} from \"../../utils/productModifiers\";\n\nconst FILTER_OPTIONS =[\n  {\n    title: '',\n    options: [\n      'Women',\n      'Men',\n    ]\n  },\n  {\n    title: 'Sizes',\n    options: [],\n  }\n];\n\nconst ProductListHeader = ({\n  searchLoading,\n  onSearchChange,\n  brandLogo,\n  show,\n  onFilter,\n}) => {\n\n  const [ filterOptions, setFilterOptions ] = useState(FILTER_OPTIONS);\n\n  useEffect(() => {\n    const getSubproducts = async () => {\n      try {\n        const subProds = await builton.products.get({\n          urlParams: {\n            tags: 'size',\n            type: 'sub'\n          }\n        });\n        if (subProds.current.length > 0) {\n          const sizes = [ ...filterOptions ];\n          sizes[1].options = getSneakersSizes(subProds.current);\n          setFilterOptions(sizes);\n        }\n      } catch(err) {\n        notify('Failed to fetch sub products', {\n          type: 'error'\n        })\n      }\n    };\n    getSubproducts();\n  }, [])\n\n  return (\n    <div className={`page-heading ${show ? \"show-heading\" : \"\"}`}>\n      <div className=\"search-container\">\n        <Input\n          loading={searchLoading}\n          leftAdornment={\n            <Search width={22} height={22} color=\"rgb(141, 141, 141)\" />\n          }\n          inputProps={{\n            type: \"text\",\n            name: \"product-search\",\n            onChange: val => {\n              onSearchChange(val);\n            }\n          }}\n          placeholder=\"Search\"\n          debounce={1000}\n          colorScheme={1}\n        />\n      </div>\n      <Filter filterOptions={filterOptions} onFilter={(sort) => onFilter(sort)} renderOption=\"size\" />\n      {brandLogo && (\n        <div className=\"brand-logo-container\">\n          <img\n            src={brandLogo}\n            style={{ objectFit: \"contain\" }}\n            alt=\"brand-logo\"\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nProductListHeader.propTypes = {\n  brandLogo: PropTypes.string,\n  onSearchChange: PropTypes.func.isRequired,\n  searchLoading: PropTypes.bool,\n  show: PropTypes.bool,\n  onFilter: PropTypes.func.isRequired,\n};\n\nexport default ProductListHeader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport BLogo from \"../../assets/icons/b_logo\";\nimport \"./index.scss\";\n\nconst NoResults = ({ show, backgroundColor }) => {\n  return (\n    <div\n      className={`no-results-container ${show ? \"show-no-results\" : \"\"}`}\n      style={{ backgroundColor }}\n    >\n      <div className=\"no-results-content-container\">\n        <BLogo width={180} height={68} />\n        <div className=\"no-results-subtitle\">No results found</div>\n      </div>\n    </div>\n  );\n};\n\nNoResults.defaultProps = {\n  show: false,\n  backgroundColor: \"transparent\"\n};\n\nNoResults.propTypes = {\n  show: PropTypes.bool,\n  backgroundColor: PropTypes.string\n};\n\nexport default NoResults;\n","import React, { useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport useReactRouter from \"use-react-router\";\nimport builton from \"../../utils/builton\";\nimport notify from \"../../utils/toast\";\nimport Header from \"../../components/Header\";\nimport BuiltonSplash from \"../../components/BuiltonSplash\";\nimport \"./index.scss\";\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\nimport PumaLogo from \"../../assets/images/puma-logo.png\";\nimport AdidasLogo from \"../../assets/images/adidas-logo.png\";\nimport NikeLogo from \"../../assets/images/nike-logo.png\";\nimport Footer from \"../../components/Footer\";\nimport ProductListHeader from \"../../components/ProductListHeader\";\nimport NoResults from \"../../components/NoResults\";\nimport { getProductName } from \"../../utils/productModifiers\";\nimport Button from \"../../components/Button\";\n\nconst ProductList = () => {\n  const { match, history } = useReactRouter();\n  const [products, setProducts] = useState(null);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const [rawProducts, setRawProducts] = useState(null);\n  const [brandLogo, setBrandLogo] = useState(null);\n  const [tagsString, setTagsString] = useState(`${match.params.category}+product`);\n\n  const searchProducts = async searchString => {\n    setProducts(null);\n    setSearchLoading(true);\n    await fetchProducts(searchString);\n  };\n\n  // TODO: Fix the dependency issue with linter\n  useEffect(() => {\n    if (match.params.category) {\n      if (match.params.category === \"adidas\") {\n        setBrandLogo(AdidasLogo);\n      } else if (match.params.category === \"puma\") {\n        setBrandLogo(PumaLogo);\n      } else if (match.params.category === \"nike\") {\n        setBrandLogo(NikeLogo);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [match]);\n\n  useEffect(() => {\n    setProducts(null);\n    fetchProducts();\n  }, [tagsString]);\n\n  useEffect(() => {\n    if (products) {\n      if (products.length > 0) {\n        let loaded = true;\n        for (let i = 0; i < products.length; i += 1) {\n          if (!products[i].loaded) {\n            loaded = false;\n            break;\n          }\n        }\n\n        if (loaded) {\n          if (loading) {\n            setLoading(false);\n          }\n          if (searchLoading) {\n            setSearchLoading(false);\n          }\n        }\n      } else {\n        if (loading) {\n          setLoading(false);\n        }\n\n        if (searchLoading) {\n          setSearchLoading(false);\n        }\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [products]);\n\n  const filterCategory = apiProducts => {\n    return apiProducts.map(product => ({\n      id: product._id.$oid,\n      image: product.image,\n      name: product.name,\n      price: product.price,\n      final_price: product.final_price,\n      currency: product.currency,\n      short_description: product.short_description,\n      description: product.description,\n      discount: product.discount,\n      loaded: false\n    }));\n  };\n\n  const fetchProducts = async searchString => {\n    try {\n      let apiProducts;\n      if (searchString) {\n        apiProducts = await builton.products.search(searchString, {\n          urlParams: {\n            expand: \"image\",\n            tags: tagsString\n          }\n        });\n      } else {\n        apiProducts = await builton.products.get({\n          size: 6,\n          urlParams: {\n            expand: \"image\",\n            tags: tagsString\n          }\n        });\n      }\n\n      setProducts(filterCategory(apiProducts.current));\n      setRawProducts(apiProducts);\n    } catch (err) {\n      notify(\"Failed to fetch products\", {\n        type: \"error\"\n      });\n    } finally {\n      if (loading) {\n        setLoading(false);\n      }\n\n      if (searchLoading) {\n        setSearchLoading(false);\n      }\n    }\n  };\n\n  const getNextProductsPage = async () => {\n    setLoadingMore(true);\n    try {\n      const nextPage = await rawProducts.next();\n      setProducts([...products, ...filterCategory(nextPage)]);\n    } catch(err) {\n      notify(\"Failed to fetch products\", {\n        type: \"error\"\n      });\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n\n  const sortProducts = (sort) => {\n    let tagsString = `${match.params.category}+product`;\n    for (let i = 0; i < sort.length; i += 1) {\n      if (typeof sort[i] === \"object\") {\n        tagsString += `+size${sort[i].size}`;\n      } else {\n        tagsString += `+${sort[i]}`;\n      }\n    }\n    setTagsString(tagsString);\n  };\n\n  const shouldShowLoadMore = () => {\n    if (products && rawProducts && products.length > 0) {\n      return rawProducts.paginationTotal > products.length;\n    }\n    return false;\n  };\n\n  const renderProductItem = (product, index) => {\n    return (\n      <CSSTransition\n        key={`product_image_${product.image.public_url}`}\n        timeout={250}\n        classNames=\"item\"\n      >\n        <div\n          className={`product-container ${\n            loading ? \"hide-product\" : \"show-product\"\n          }`}\n          onClick={() =>\n            history.push(`/product_list/${match.params.category}/${product.id}`)\n          }\n        >\n          {product.discount > 0 &&\n            <div className=\"product-discount-container\">\n              - {product.discount * 100} %\n            </div>\n          }\n          <img\n            onLoad={() => {\n              products[index].loaded = true;\n              setProducts([...products]);\n            }}\n            alt={`${product.name}-product`}\n            src={product.image.public_url}\n          />\n          <div className=\"product-description\">\n            <div className=\"product-description-inner-container\">\n              <div>{getProductName(product.name)}</div>\n              <div className={product.discount > 0 && \"discounted-product\"}>{product.short_description}</div>\n            </div>\n            <div className=\"product-price-container\">\n              {product.discount > 0 &&\n                <span className=\"discounted-product\">{product.price} {product.currency}</span>\n              }\n              {product.final_price} {product.currency}\n            </div>\n          </div>\n        </div>\n      </CSSTransition>\n    );\n  };\n\n  return (\n    <div className=\"main-container\">\n      <Header />\n      <div className=\"product-list-wrapper\">\n        <BuiltonSplash show={loading} />\n        <ProductListHeader\n          show={!loading}\n          onSearchChange={val => searchProducts(val)}\n          brandLogo={brandLogo}\n          onFilter={(sort) => sortProducts(sort)}\n          searchLoading={searchLoading}\n        />\n        <TransitionGroup className=\"product-list-grid\">\n          {products &&\n            products.map((product, index) => renderProductItem(product, index))}\n        </TransitionGroup>\n        <NoResults show={products && products.length === 0} />\n      </div>\n      <div className={`product-list-load-more-container ${shouldShowLoadMore() ? 'show-load-more' : 'hide-load-more'}`}>\n        <Button type=\"button\" onClick={() => getNextProductsPage()} title=\"Load More\" loading={loadingMore} />\n      </div>\n      <Footer>\n        <div className=\"footer-inner\">\n          *Note: The products and the ordering system is fictional. None of the\n          illustrated products exists and can be ordered. Please use only for\n          demo purposes and refer to{\" \"}\n          <a\n            href=\"https://builton.dev\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            Builton.dev\n          </a>\n          .\n        </div>\n      </Footer>\n    </div>\n  );\n};\n\nexport default withRouter(ProductList);\n","import React, { useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport useReactRouter from \"use-react-router\";\nimport builton from \"../../utils/builton\";\nimport notify from \"../../utils/toast\";\n\nimport \"./index.scss\";\nimport Header from \"../../components/Header\";\nimport config from \"../../config\";\nimport { getProductName, getSneakersSizes } from \"../../utils/productModifiers\";\nimport BuiltonSplash from \"../../components/BuiltonSplash\";\nimport Button from \"../../components/Button\";\nimport { useDispatch } from \"reactn\";\nimport Carousel from \"../../components/Carousel\";\nimport SectionHeader from \"../../components/SectionHeader\";\n\nconst Product = React.memo(() => {\n  const { history, match } = useReactRouter();\n  const [product, setProduct] = useState(null);\n  const [similarProducts, setSimilarProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedSize, setSelectedSize] = useState(null);\n  const addItemToBag = useDispatch(\"addItemToBag\"); //reducer\n\n  useEffect(() => {\n    setSimilarProducts([]);\n    const fetchProduct = async () => {\n      try {\n        const apiProduct = await builton.products.get(match.params.productId, {\n          urlParams: {\n            expand: \"_sub_products, image\"\n          }\n        });\n        setProduct(apiProduct);\n      } catch (err) {\n        setLoading(false);\n        notify(\"Failed to fetch product\", {\n          type: \"error\"\n        });\n      }\n    };\n\n\n    if (!loading) {\n      setLoading(true);\n    }\n    fetchProduct();\n    fetchRecommendations();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [match.params.productId]);\n\n  const fetchRecommendations = async () => {\n    try {\n      const recommendations = await builton.aiModels.getRecommendations('5d7b67d8de7cb5000a1006aa',\n      {\n          data: match.params.productId,\n          options: {\n            size: 3,\n          },\n        },\n        {\n          urlParams: {\n            expand: 'product, result.similar.reference_label.image'\n          }\n        }\n      );\n\n      if (recommendations.result[0].similar && recommendations.result[0].similar.length > 0) {\n        const simProds = recommendations.result[0].similar.map((recommendedProduct) => {\n          return recommendedProduct.reference_label;\n        });\n        setSimilarProducts(simProds.length > 0 ? simProds : undefined);\n      } else {\n        setSimilarProducts(undefined);\n      }\n    } catch(err) {\n      setSimilarProducts(undefined);\n      console.error('Failed to fetch similar products.')\n    }\n  };\n\n  const addToBag = async () => {\n    if (!selectedSize) {\n      notify(\"Please select your desired size.\", {\n        type: \"warning\"\n      });\n    } else {\n      try {\n        await addItemToBag({\n          product,\n          size: selectedSize,\n          category: match.params.category\n        });\n        notify(`${product.name} successfully added to your bag.`, {\n          type: \"info\"\n        });\n      } catch (err) {\n        notify(`Failed to add ${product.name} to your bag.`, {\n          type: \"error\"\n        });\n      }\n    }\n  };\n\n  return (\n    <div className=\"main-container\">\n      <Header />\n      <div className=\"product-wrapper\">\n        <BuiltonSplash show={loading} />\n        <div className=\"product-image-container\">\n          {product && (\n            <>\n              <div\n                className={`product-image-inner-container ${\n                  loading ? \"hide-product\" : \"show-product\"\n                }`}\n              >\n                <div>\n                  <img\n                    onLoad={() => setLoading(false)}\n                    onError={() => setLoading(false)}\n                    src={product.image.public_url}\n                    alt={`${product.name}-img`}\n                  />\n                </div>\n              </div>\n            </>\n          )}\n          <div className={`similar-products-container ${loading ? \"hide-product\" : \"show-product\"}`}>\n            <div className={`similar-products-title-container`}>\n              <SectionHeader title=\"You might also like\" type=\"sub\" style={{ flex: 1, marginBottom: 0 }} />\n            </div>\n            <Carousel\n              items={similarProducts}\n              onActiveItemClick={(category, productId) => history.push(`/product_list/${category}/${productId}`)}\n            />\n          </div>\n        </div>\n        <div className=\"product-description-container\">\n          {product && (\n            <div\n              className={`product-description  ${\n                loading ? \"hide-product\" : \"show-product\"\n              }`}\n            >\n              <div className=\"product-description-top\">\n                <div className=\"product-title-container\">\n                  <span className=\"product-title\">\n                    {getProductName(product.name)}\n                  </span>\n                  <span className=\"product-subtitle\">\n                    {product.short_description}\n                  </span>\n                  {product.discount > 0 &&\n                    <span className=\"product-discounted-price\">\n                      {product.price} {product.currency}\n                    </span>\n                  }\n                  <span className=\"product-price\">\n                    {product.discount > 0 &&\n                      <span className=\"product-new-price-title\">new price</span>\n                    }\n                    {product.final_price} {product.currency}\n                  </span>\n                </div>\n                <div className=\"product-description-content\">\n                  {product.description}\n                </div>\n                <div className=\"product-id\">\n                  Article id: <span>{product.human_id}</span>\n                </div>\n                <div className=\"product-sizes-container\">\n                  {getSneakersSizes(product)\n                    .sort((a, b) =>\n                      parseFloat(a.size) <= parseFloat(b.size) ? -1 : 0\n                    )\n                    .map(prodSize => (\n                      <Button\n                        key={`prodSize-${prodSize.id}`}\n                        onClick={() =>\n                          setSelectedSize(\n                            selectedSize &&\n                              selectedSize._id.$oid === prodSize.id\n                              ? null\n                              : prodSize.product\n                          )\n                        }\n                        type=\"button\"\n                        style={{\n                          fontSize: 14,\n                          padding: \"4px 6px\",\n                          marginTop: 12,\n                          minWidth: 80,\n                          height: 24\n                        }}\n                        title={prodSize.size}\n                        className={`button ${\n                          selectedSize && selectedSize._id.$oid === prodSize.id\n                            ? \"selected\"\n                            : \"\"\n                        }`}\n                      />\n                    ))}\n                </div>\n              </div>\n              <div className=\"add-to-cart-button-container\">\n                <Button\n                  onClick={() => addToBag()}\n                  type=\"button\"\n                  style={{ minWidth: 200 }}\n                  className=\"button round\"\n                  title=\"Add to Bag\"\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport default withRouter(React.memo(Product));\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\nimport useReactRouter from \"use-react-router\";\nimport { useDispatch, useGlobal } from \"reactn\";\nimport Button from \"../Button\";\n\nconst CheckoutNavigation = ({\n  onStep,\n  onPlaceOrder,\n  shouldNavigate,\n  loading\n}) => {\n  const { match, history } = useReactRouter();\n  const [step, setStep] = useState(0);\n  const [isNextStep, setIsNextStep] = useState(false);\n  const updateCheckoutStep = useDispatch(\"updateCheckoutStep\");\n  const [checkout] = useGlobal(\"checkout\");\n  const [user] = useGlobal(\"user\");\n\n  useEffect(() => {\n    if (user) {\n      if (step === 1) {\n        setCheckoutStep();\n        pushStep(2);\n      }\n    } else {\n      if (step > 1) {\n        pushStep(1);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [step]);\n\n  useEffect(() => {\n    if (checkout) {\n      const stepsVals = [...Object.values(checkout)];\n      if (match.params.step) {\n        let length = 0;\n        for (let i = 0; i < stepsVals.length; i += 1) {\n          if (match.params.step === stepsVals[i].title) {\n            if (isNextStep) {\n              // In case the user has pressed on \"NEXT\", we navigate to the next step and animate 1\n              // Or navigates from the checkout navigator\n              length = 1;\n            } else {\n              // In case the user has loaded the url by typing\n              // We check if the steps before the loaded one are complete\n              // if not complete, then we navigate to the step that is not completed\n              if (stepsVals[i - 1] && stepsVals[i - 1].complete) {\n                length = i;\n              } else {\n                for (let x = i; x >= 0; x -= 1) {\n                  if (!stepsVals[x].complete) {\n                    pushStep(x);\n                  }\n                }\n              }\n            }\n            onStep(i);\n            setStep(i);\n            break;\n          }\n        }\n\n        animateSteps(length);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [match.params.step]);\n\n  const setCheckoutStep = async () => {\n    const checkoutStepsCopy = { ...checkout };\n    checkoutStepsCopy[step].complete = true;\n    await updateCheckoutStep(checkoutStepsCopy);\n  };\n\n  const pushStep = async stepNumb => {\n    if ((!shouldNavigate(stepNumb) && !stepNumb) || loading) return false;\n\n    if (!stepNumb) {\n      await setCheckoutStep();\n    }\n\n    setIsNextStep(true);\n    setTimeout(() =>\n      history.push(\n        `/checkout/${checkout[typeof stepNumb !== \"undefined\" ? stepNumb : step + 1].title}`\n      )\n    );\n  };\n\n  const animateSteps = length => {\n    const elements = document.getElementsByClassName(\n      \"checkout-steps-container\"\n    );\n    if (elements && elements[0] && elements[0].children) {\n      const childrenElements = elements[0].children;\n      let defaultTransitionDelay = 0;\n      for (let i = 1; i < childrenElements.length; i += 1) {\n        if (length === 1 && step === 1 && user) {\n          // This is if the user is authenticated\n          defaultTransitionDelay = 350;\n        } else if (length === 1) {\n          defaultTransitionDelay = i >= 0 ? 0 : 350;\n        } else {\n          defaultTransitionDelay += 350;\n        }\n        for (let x = 0; x < childrenElements[i].children.length; x += 1) {\n          if (\n            childrenElements[i].children[x].className.includes(\n              \"checkout-step-progress\"\n            )\n          ) {\n            childrenElements[i].children[\n              x\n            ].children[0].style.transitionDelay = `${defaultTransitionDelay}ms`;\n          } else if (\n            childrenElements[i].children[x].className.includes(\n              \"checkout-step-circle\"\n            )\n          ) {\n            childrenElements[i].children[\n              x\n            ].children[0].style.animationDelay = `${defaultTransitionDelay +\n              350}ms`;\n          }\n        }\n      }\n    }\n  };\n\n  return (\n    <>\n      <div className=\"checkout-steps-container\">\n        <div className={`checkout-step ${step >= 0 ? \"active-step\" : \"\"}`}>\n          <div\n            className=\"checkout-step-circle\"\n            onClick={() => step >= 0 && pushStep(0)}\n          >\n            <div />\n          </div>\n          <div className=\"checkout-step-title\">Your bag</div>\n        </div>\n        <div className={`checkout-step ${step >= 1 ? \"active-step\" : \"\"}`}>\n          <div className=\"checkout-step-progress\">\n            <div />\n          </div>\n          <div\n            className=\"checkout-step-circle\"\n            onClick={() => step >= 1 && pushStep(1)}\n          >\n            <div />\n          </div>\n          <div className=\"checkout-step-title\">Authentication</div>\n        </div>\n        <div className={`checkout-step ${step >= 2 ? \"active-step\" : \"\"}`}>\n          <div className=\"checkout-step-progress\">\n            <div />\n          </div>\n          <div\n            className=\"checkout-step-circle\"\n            onClick={() => step >= 2 && pushStep(2)}\n          >\n            <div />\n          </div>\n          <div className=\"checkout-step-title\">Payment method</div>\n        </div>\n        <div className={`checkout-step ${step >= 3 ? \"active-step\" : \"\"}`}>\n          <div className=\"checkout-step-progress\">\n            <div />\n          </div>\n          <div\n            className=\"checkout-step-circle\"\n            onClick={() => step >= 3 && pushStep(3)}\n          >\n            <div />\n          </div>\n          <div className=\"checkout-step-title\">Delivery address</div>\n        </div>\n        <div className={`checkout-step ${step >= 4 ? \"active-step\" : \"\"}`}>\n          <div className=\"checkout-step-progress\">\n            <div />\n          </div>\n          <div\n            className=\"checkout-step-circle\"\n            onClick={() => step >= 4 && pushStep(4)}\n          >\n            <div />\n          </div>\n          <div className=\"checkout-step-title\">Confirmation</div>\n        </div>\n      </div>\n      {step !== 1 && (\n        <div className=\"checkout-next-step\">\n          <Button\n            loading={loading}\n            type=\"button\"\n            onClick={() => (step === 4 ? onPlaceOrder() : pushStep())}\n            title={step === 4 ? \"Place order\" : \"Next\"}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nCheckoutNavigation.defaultProps = {\n  loading: false\n};\n\nCheckoutNavigation.propTypes = {\n  onStep: PropTypes.func,\n  onPlaceOrder: PropTypes.func,\n  shouldNavigate: PropTypes.func,\n  loading: PropTypes.bool\n};\n\nexport default CheckoutNavigation;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.scss\";\n\nconst TableRow = ({ children, onClick, style, className }) => {\n  return (\n    <div\n      className={`table-row ${onClick ? \"clickable-row\" : \"\"} ${className}`}\n      style={style}\n      onClick={onClick}\n    >\n      {children}\n    </div>\n  );\n};\n\nTableRow.defaultProps = {\n  onClick: undefined,\n  style: {},\n  className: \"\"\n};\n\nTableRow.propTypes = {\n  onClick: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node\n  ]).isRequired,\n  style: PropTypes.object,\n  className: PropTypes.string\n};\n\nexport default TableRow;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.scss\";\n\nconst TableHeader = ({ children, className, style }) => {\n  return (\n    <div className={`table-header ${className}`} style={style}>\n      {children}\n    </div>\n  );\n};\n\nTableHeader.defaultProps = {\n  className: \"\",\n  style: {}\n};\n\nTableHeader.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.arrayOf(PropTypes.node)\n  ]).isRequired,\n  style: PropTypes.object\n};\n\nexport default TableHeader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\n\nconst Table = ({ children }) => {\n  return <div className=\"table\">{children}</div>;\n};\n\nTable.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node\n  ]).isRequired\n};\n\nexport default Table;\n","import React from \"react\";\nimport {\n  getProductName,\n  getSneakersSize\n} from \"../../../utils/productModifiers\";\nimport RemoveShopping from \"../../../assets/icons/remove_shopping\";\nimport useReactRouter from \"use-react-router\";\nimport { useDispatch, useGlobal } from \"reactn\";\nimport SectionHeader from \"../../../components/SectionHeader\";\nimport TableRow from \"../../../components/TableRow\";\nimport TableHeader from \"../../../components/TableHeader\";\nimport Table from \"../../../components/Table\";\n\nconst CheckoutBag = () => {\n  const [bag] = useGlobal(\"bag\");\n\n  const removeItemFrombag = useDispatch(\"removeItemFromBag\");\n  const { history } = useReactRouter();\n\n  const removeItem = (e, itemId) => {\n    e.stopPropagation();\n    removeItemFrombag(itemId);\n  };\n\n  const calculateTotalAmount = () => {\n    let total = 0;\n    for (let i = 0; i < bag.length; i += 1) {\n      total += bag[i].product.final_price;\n    }\n    return total;\n  };\n\n  const renderBagRow = (item, index) => {\n    return (\n      <TableRow\n        key={`bag-item-${item.product.id}-${index}`}\n        style={{ padding: \"6px 12px\" }}\n        onClick={() =>\n          history.push(\n            `/product_list/${item.category}/${item.product._id.$oid}`\n          )\n        }\n      >\n        <div className=\"checkout-name-col\">\n          {getProductName(item.product.name)}\n        </div>\n        <div className=\"checkout-description-col\">\n          {item.product.short_description}\n        </div>\n        <div className=\"checkout-size-col\">{getSneakersSize(item.size)}</div>\n        <div className=\"checkout-price-col\">\n          {item.product.final_price} {item.product.currency}\n        </div>\n        <div className=\"checkout-remove-col\">\n          <div\n            className=\"remove-bag-item\"\n            onClick={e => removeItem(e, item.size._id.$oid)}\n          >\n            <RemoveShopping color=\"#c5c5c5\" />\n          </div>\n        </div>\n      </TableRow>\n    );\n  };\n\n  if (!bag) return null;\n\n  return (\n    <>\n      <SectionHeader title=\"Your items\" />\n      <Table>\n        <TableHeader className=\"checkout-items-header\">\n          <div className=\"checkout-name-col\">Brand</div>\n          <div className=\"checkout-description-col\">Model</div>\n          <div className=\"checkout-size-col\">Size</div>\n          <div className=\"checkout-price-col\">Price</div>\n          <div className=\"checkout-remove-col\" />\n        </TableHeader>\n        {bag && bag.map((item, index) => renderBagRow(item, index))}\n        <TableRow className=\"checkout-bag-total-row\">\n          <div className=\"checkout-bag-total-title\">Total</div>\n          <div className=\"checkout-bag-total\">\n            {calculateTotalAmount()} {bag[0].product.currency}\n          </div>\n          <div className=\"checkout-bag-empty\" />\n        </TableRow>\n      </Table>\n    </>\n  );\n};\n\nexport default CheckoutBag;\n","import React from \"react\";\nimport AuthForm from \"../../Auth/authForm\";\nimport useReactRouter from \"use-react-router\";\nimport { useGlobal, useDispatch } from \"reactn\";\n\nconst CheckoutAuthentication = () => {\n  const { history } = useReactRouter();\n  const [checkout] = useGlobal(\"checkout\");\n  const updateCheckout = useDispatch(\"updateCheckoutStep\");\n  return (\n    <AuthForm\n      onAuth={() => {\n        const checkoutCopy = { ...checkout };\n        checkoutCopy[1].complete = true;\n        updateCheckout(checkoutCopy);\n        history.push(\"/checkout/payment_method\");\n      }}\n    />\n  );\n};\n\nexport default CheckoutAuthentication;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./index.scss\";\n\nconst ListItem = ({ children, onClick }) => {\n  return (\n    <div onClick={onClick} className=\"list-item-row\">\n      {children}\n    </div>\n  );\n};\n\nListItem.defaultProps = {\n  onClick: () => {}\n};\n\nListItem.propTypes = {\n  onClick: PropTypes.func\n};\n\nexport default ListItem;\n","import React, { useState, useEffect } from \"react\";\nimport builton from \"../../../utils/builton\";\nimport notify from \"../../../utils/toast\";\nimport { useGlobal, useDispatch } from \"reactn\";\nimport Spinner from \"../../../components/Spinner\";\nimport ListItem from \"../../../components/ListItem\";\nimport SectionHeader from \"../../../components/SectionHeader\";\n\n// We create test payment method on Builton API\n// And we attach the payment method to our order\n\n// Note: For clients in EEA/EU, Stripe applies SCA (String Customer Authentication)\n// Please follow https://docs.builton.dev/building-blocks/payments-1/strong-customer-authentication\n// to implement SCA in production environment\n\nconst CheckoutPaymentMethod = () => {\n  const [paymentMethod, setPaymentMethod] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [user] = useGlobal(\"user\");\n  const [order] = useGlobal(\"order\");\n  const updateOrder = useDispatch(\"updateOrder\");\n  const updatePaymentMethod = useDispatch(\"updatePaymentMethod\");\n\n  const getPaymentMethod = async () => {\n    if (!user) return;\n    try {\n      const paymentMethods = await builton.paymentMethods.get();\n      if (!paymentMethods.length) {\n        const paymentMethod = await builton.paymentMethods.create({\n          payment_method: \"stripe\",\n          token: \"tok_visa\"\n        });\n        setPaymentMethod(paymentMethod);\n        updateOrderState(paymentMethod);\n      } else {\n        setPaymentMethod(paymentMethods[0]);\n        updateOrderState(paymentMethods[0]);\n      }\n      setLoading(false);\n    } catch (err) {\n      notify(\"Failed to get payment method\", {\n        type: \"error\"\n      });\n      setLoading(false);\n    }\n  };\n\n  const updateOrderState = paymentMethod => {\n    updatePaymentMethod(paymentMethod);\n    updateOrder({\n      ...order,\n      payment_method: paymentMethod._id.$oid\n    });\n  };\n\n  useEffect(() => {\n    getPaymentMethod();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <>\n      <SectionHeader title=\"Payment method\" />\n      {loading && (\n        <div className=\"checkout-spinner-container\">\n          <Spinner height={32} width={32} />\n        </div>\n      )}\n      <SectionHeader title=\"Selected payment method\" type=\"sub\" />\n      {!loading && paymentMethod && (\n        <ListItem>\n          <div className=\"checkout-list-item-left\">\n            <div className=\"checkout-payment-card-number\">\n              **** **** **** {paymentMethod.card.last4}\n            </div>\n            <div className=\"checkout-payment-method-card-name\">John Doe</div>\n          </div>\n          <div className=\"checkout-list-item-right\">\n            <div className=\"checkout-payment-card-exp-date\">\n              {paymentMethod.card.exp_month} / {paymentMethod.card.exp_year}\n            </div>\n            <div className=\"checkout-list-item-checkmark\">&#10003;</div>\n          </div>\n        </ListItem>\n      )}\n    </>\n  );\n};\n\nexport default CheckoutPaymentMethod;\n","const parseGooglePlace = place => {\n  let componentForm = {\n    street_number: { type: 'short_name', apiName: 'street_name' },\n    route: { type: 'long_name', apiName: 'street_name' },\n    locality: { type: 'long_name', apiName: 'state' },\n    country: { type: 'long_name', apiName: 'country' },\n    postal_code: { type: 'short_name', apiName: 'zip_code' },\n    administrative_area_level_1: { type: 'short_name', apiName: 'city' }\n  };\n\n  let address = {};\n  place.address_components.map(component => {\n    let addressType = component.types[0];\n    if (componentForm[addressType]) {\n      let myComponentForm = componentForm[addressType];\n      let val = component[componentForm[addressType].type];\n      if (\n        address[myComponentForm.apiName] &&\n        address[myComponentForm.apiName].length > 0\n      ) {\n        val = address[myComponentForm.apiName] + ' ' + val;\n      }\n      address[myComponentForm.apiName] = val;\n    }\n    return true;\n  });\n\n  address['geo'] = [\n    place.geometry.location.lat(),\n    place.geometry.location.lng()\n  ];\n\n  return address;\n};\n\n\n// Used to parse google place address object into a string representation\nconst parseAddress = address => {\n  if (!address) return;\n  let stringAddress = '';\n  if (address.street_name)\n    stringAddress += address.street_name + (address.building ? ' ' : ', ');\n  if (address.street_name && address.building)\n    stringAddress += address.building + ', ';\n  if (address.zipcode) stringAddress += address.zipcode + ' ';\n  if (address.city) stringAddress += address.city + ', ';\n  if (address.state && address.state !== address.city)\n    stringAddress += address.state + ', ';\n  if (address.country) stringAddress += address.country;\n  return stringAddress;\n};\n\nexport { parseGooglePlace, parseAddress }\n","import React, { useState } from \"react\";\nimport ListItem from \"../../../components/ListItem\";\nimport { useDispatch, useGlobal } from \"reactn\";\nimport PlacesAutocomplete, {\n  geocodeByAddress\n} from \"react-places-autocomplete\";\nimport Spinner from \"../../../components/Spinner\";\nimport Input from \"../../../components/Input\";\nimport Search from \"../../../assets/icons/search\";\nimport { parseGooglePlace } from \"../../../utils/address\";\nimport notify from \"../../../utils/toast\";\nimport SectionHeader from \"../../../components/SectionHeader\";\n\nconst CheckoutDeliveryAddress = () => {\n  const [order] = useGlobal(\"order\");\n  const [selectedAddress, setSelectedAddress] = useState(\n    order.delivery_address\n  );\n  const [address, setAddress] = useState(\"\");\n\n  const updateOrder = useDispatch(\"updateOrder\");\n\n  const handleChange = newAddress => {\n    setAddress(newAddress);\n  };\n\n  const handleSelect = async address => {\n    setAddress(\"\");\n    try {\n      const addressObj = await geocodeByAddress(address);\n      const parsedAddress = parseGooglePlace(addressObj[0]);\n\n      updateOrder({\n        ...order,\n        delivery_address: parsedAddress\n      });\n      setSelectedAddress(parsedAddress);\n    } catch (err) {\n      notify(\"Failed to get address\", {\n        type: \"error\"\n      });\n      setSelectedAddress(undefined);\n    }\n  };\n\n  return (\n    <>\n      <SectionHeader title=\"Delivery address\" />\n      <PlacesAutocomplete\n        value={address}\n        onChange={handleChange}\n        onSelect={handleSelect}\n        debounce={1000}\n      >\n        {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => {\n          return (\n            <div className=\"checkout-address-picker-container\">\n              <div className=\"checkout-address-search-container\">\n                <Input\n                  leftAdornment={\n                    <Search width={22} height={22} color=\"rgb(141, 141, 141)\" />\n                  }\n                  id=\"delivery_address_input\"\n                  inputProps={{\n                    ...getInputProps(),\n                    onChange: (val, ev) => {\n                      getInputProps().onChange(ev);\n                    }\n                  }}\n                  loading={loading}\n                  placeholder=\"Search address...\"\n                  colorScheme={1}\n                />\n              </div>\n              <div\n                className={`autocomplete-dropdown-container ${\n                  suggestions.length > 0 ? \"show-suggestions\" : \"\"\n                }`}\n              >\n                {loading && (\n                  <div className=\"checkout-address-spinner-container\">\n                    <Spinner />\n                  </div>\n                )}\n                {suggestions.map(suggestion => {\n                  const className = suggestion.active\n                    ? \"suggestion-item suggestion-item--active\"\n                    : \"suggestion-item\";\n                  return (\n                    <div\n                      {...getSuggestionItemProps(suggestion, {\n                        className\n                      })}\n                    >\n                      <span>{suggestion.description}</span>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          );\n        }}\n      </PlacesAutocomplete>\n      <SectionHeader title=\"Selected delivery address\" type=\"sub\" />\n      <div>\n        {selectedAddress && (\n          <ListItem>\n            <div className=\"checkout-list-item-left\">\n              <div>{selectedAddress.street_name}</div>\n              <div className=\"checkout-address-city\">\n                <div>{selectedAddress.zip_code}</div>\n                <div>{selectedAddress.city}</div>\n              </div>\n            </div>\n            <div className=\"checkout-list-item-right\">\n              <div>{selectedAddress.country}</div>\n              <div className=\"checkout-list-item-checkmark\">&#10003;</div>\n            </div>\n          </ListItem>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default CheckoutDeliveryAddress;\n","import React from \"react\";\nimport { useGlobal } from \"reactn\";\nimport {\n  getProductName,\n  getSneakersSize\n} from \"../../../utils/productModifiers\";\nimport useReactRouter from \"use-react-router\";\nimport ListItem from \"../../../components/ListItem\";\nimport SectionHeader from \"../../../components/SectionHeader\";\n\nconst CheckoutConfirmation = () => {\n  const [order] = useGlobal(\"order\");\n  const [bag] = useGlobal(\"bag\");\n  const [paymentMethod] = useGlobal(\"paymentMethod\");\n\n  const { history } = useReactRouter();\n\n  const calculateTotalAmount = () => {\n    let total = 0;\n    for (let i = 0; i < bag.length; i += 1) {\n      total += bag[i].product.final_price;\n    }\n    return total;\n  };\n\n  const renderPaymentMethod = () => {\n    return (\n      <div className=\"checkout-overview-sub-container\">\n        <SectionHeader title=\"Selected payment method\" type=\"sub\" />\n        <ListItem onClick={() => history.push(\"/checkout/payment_method\")}>\n          <div className=\"checkout-list-item-left\">\n            <div className=\"checkout-payment-card-number\">\n              **** **** **** {paymentMethod.card.last4}\n            </div>\n            <div className=\"checkout-payment-method-card-name\">John Doe</div>\n          </div>\n          <div className=\"checkout-list-item-right\">\n            <div className=\"checkout-payment-card-exp-date\">\n              {paymentMethod.card.exp_month} / {paymentMethod.card.exp_year}\n            </div>\n            <div className=\"checkout-list-item-checkmark\">&#10003;</div>\n          </div>\n        </ListItem>\n      </div>\n    );\n  };\n\n  const renderDeliveryAddress = () => {\n    return (\n      <div className=\"checkout-overview-sub-container\">\n        <SectionHeader title=\"Selected delivery address\" type=\"sub\" />\n        <ListItem onClick={() => history.push(\"/checkout/delivery_address\")}>\n          <div className=\"checkout-list-item-left\">\n            <div>{order.delivery_address.street_name}</div>\n            <div className=\"checkout-address-city\">\n              <div>{order.delivery_address.zip_code}</div>\n              <div>{order.delivery_address.city}</div>\n            </div>\n          </div>\n          <div className=\"checkout-list-item-right\">\n            <div>{order.delivery_address.country}</div>\n            <div className=\"checkout-list-item-checkmark\">&#10003;</div>\n          </div>\n        </ListItem>\n      </div>\n    );\n  };\n\n  const renderBag = () => {\n    return (\n      <div className=\"checkout-overview-sub-container\">\n        <div className=\"checkout-items-header\">\n          <div className=\"checkout-name-col\">Brand</div>\n          <div className=\"checkout-description-col\">Model</div>\n          <div className=\"checkout-size-col\">Size</div>\n          <div className=\"checkout-price-col\">Price</div>\n        </div>\n        {bag && bag.map((item, index) => renderBagRow(item, index))}\n      </div>\n    );\n  };\n\n  const renderBagRow = (item, index) => {\n    return (\n      <div\n        className=\"checkout-bag-item-row\"\n        key={`bag-item-${item.product.id}-${index}`}\n        onClick={() => history.push(`/checkout/bag`)}\n      >\n        <div className=\"checkout-name-col\">\n          {getProductName(item.product.name)}\n        </div>\n        <div className=\"checkout-description-col\">\n          {item.product.short_description}\n        </div>\n        <div className=\"checkout-size-col\">{getSneakersSize(item.size)}</div>\n        <div className=\"checkout-price-col\">\n          {item.product.final_price} {item.product.currency}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"checkout-overview-container\">\n      <SectionHeader title=\"Order Overview\" />\n      {bag && renderBag()}\n      {paymentMethod && renderPaymentMethod()}\n      {order.delivery_address && renderDeliveryAddress()}\n      <div className=\"checkout-bag-total-row\">\n        <div className=\"checkout-bag-total-title\">Total</div>\n        <div className=\"checkout-bag-total\">\n          {calculateTotalAmount()} {bag[0].product.currency}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CheckoutConfirmation;\n","import React from \"react\";\n\nconst Disclaimer = () => {\n  return (\n    <>\n      <div className=\"checkout-disclaimer-container\">\n        <span>\n          This is a DEMO to showcase Builton.dev API functionality. The\n          products, prices, payment method, checkout process and its affiliates\n          are fictional. No charges and deliveries will be made. For more\n          information please check{\" \"}\n          <a\n            href=\"https://builton.dev\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Builton.dev\n          </a>{\" \"}\n          website.\n        </span>\n      </div>\n    </>\n  );\n};\n\nexport default Disclaimer;\n","import React, { useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { useGlobal, useDispatch } from \"reactn\";\n\nimport \"./index.scss\";\nimport useReactRouter from \"use-react-router\";\nimport builton from \"../../utils/builton\";\nimport notify from \"../../utils/toast\";\nimport Header from \"../../components/Header\";\nimport CheckoutNavigation from \"../../components/CheckoutNavigation\";\nimport Bag from \"./Bag\";\nimport Authentication from \"./Authentication\";\nimport PaymentMethod from \"./PaymentMethod\";\nimport DeliveryAddress from \"./DeliveryAddress\";\nimport Overview from \"./Overview\";\nimport Disclaimer from \"./Disclaimer\";\nimport BLogo from \"../../assets/icons/b_logo\";\nimport Carousel from \"../../components/Carousel\";\nimport SectionHeader from \"../../components/SectionHeader\";\n\nconst Checkout = () => {\n  const [step, setStep] = useState(null);\n  const [confirmOrder, setConfirmOrder] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [bag] = useGlobal(\"bag\");\n  const [order] = useGlobal(\"order\");\n  const updateOrder = useDispatch(\"updateOrder\");\n  const clearCheckout = useDispatch(\"clearCheckout\");\n  const clearBag = useDispatch(\"clearBag\");\n  const { history } = useReactRouter();\n  const [recommendedProducts, setRecommendedProducts] = useState([]);\n\n  useEffect(() => {\n    const getRecommendations = async () => {\n      try {\n        const recommendations = await builton.aiModels.getRecommendations(\n        \"5d55180941f4e7000dea3ca4\",\n        {\n            data: bag.map(item => item.product._id.$oid),\n            options: {\n              size: 4\n            }\n          },\n          {\n            urlParams: {\n              expand: 'product, result.product.image'\n            }\n          }\n        );\n\n        if (\n          recommendations.result &&\n          recommendations.result.length > 0\n        ) {\n          const complementaryItems = recommendations.result.map((recommendedProduct) => {\n            return recommendedProduct.product[0];\n          });\n\n          setRecommendedProducts(complementaryItems.length > 0 ? complementaryItems : undefined);\n        } else {\n          setRecommendedProducts(undefined);\n        }\n      } catch (err) {\n        setRecommendedProducts(undefined);\n        console.warn(\"Failed to fetch similar products.\");\n      }\n    };\n\n    if (!recommendedProducts.length && bag && bag.length > 0) {\n      getRecommendations();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (step === 1 && bag && bag.length > 0) {\n      order.items = [];\n      for (let i = 0; i < bag.length; i += 1) {\n        order.items.push({\n          product: bag[i].product._id.$oid,\n          quantity: 1,\n          sub_products: [bag[i].size._id.$oid]\n        });\n      }\n      updateOrder(order);\n    }\n\n    if (step === 5) {\n      setConfirmOrder(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [step]);\n\n  useEffect(() => {\n    if (confirmOrder) {\n      placeOrder();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [confirmOrder]);\n\n  const placeOrder = async () => {\n    setLoading(true);\n\n    try {\n      const createdOrder = await builton.orders.create({\n        ...order\n      });\n\n      // pay for the order\n      await builton.payments.pay(createdOrder.payments[0].$oid);\n\n      history.push(\"/\");\n    } catch (err) {\n      notify(\"Failed to create order\", {\n        type: \"error\"\n      });\n    }\n\n    setLoading(false);\n\n    // Clear the checkout and the bag after the order has been create\n    await clearCheckout();\n    await clearBag();\n  };\n\n  const checkShouldNavigate = stepNumb => {\n    // Check if delivery address has been set to navigate further\n    if (step === 3 && typeof stepNumb === \"undefined\") {\n      if (!order.delivery_address) {\n        notify(\"Please select delivery address to proceed\", {\n          type: \"warning\"\n        });\n        return false;\n      }\n    }\n    return true;\n  };\n\n  return (\n    <div className=\"main-container checkout-main-container\">\n      <Header />\n      <div className=\"wrapper checkout-wrapper\">\n        <div className=\"checkout-container\">\n          <div\n            className={`checkout-items-container checkout-no-items-container ${\n              !bag || bag.length === 0 ? \"show-container\" : \"hide-container\"\n            }`}\n          >\n            {(!bag || bag.length === 0) && (\n              <div className=\"checkout-no-items\">\n                <BLogo width={160} height={80} />\n                No items in the bag\n              </div>\n            )}\n          </div>\n          {bag && bag.length > 0 && (\n            <>\n              <div style={{ overflow: 'hidden' }}>\n                <div className=\"checkout-inner-container\">\n                  {bag && bag.length > 0 && <></>}\n                  <div\n                    className={`checkout-items-container ${\n                      step === 0 ? \"show-container\" : \"hide-container\"\n                    }`}\n                  >\n                    {step === 0 && <Bag />}\n                  </div>\n                  <div\n                    className={`checkout-items-container ${\n                      step === 1 ? \"show-container\" : \"hide-container\"\n                    }`}\n                  >\n                    <div className=\"step-auth-container\">\n                      {step === 1 && <Authentication />}\n                    </div>\n                  </div>\n                  <div\n                    className={`checkout-items-container ${\n                      step === 2 ? \"show-container\" : \"hide-container\"\n                    }`}\n                  >\n                    {// We render it on order confirmation as well\n                    // because we don't save payment information data in the local storage\n                    // and we need to fetch and set it again in case the confirmation is reloaded\n                    (step === 2 || step === 4) && <PaymentMethod />}\n                  </div>\n                  <div\n                    className={`checkout-items-container ${\n                      step === 3 ? \"show-container\" : \"hide-container\"\n                    }`}\n                  >\n                    {step === 3 && <DeliveryAddress />}\n                  </div>\n                  <div\n                    className={`checkout-items-container ${\n                      step === 4 ? \"show-container\" : \"hide-container\"\n                    }`}\n                  >\n                    {step === 4 && <Overview />}\n                  </div>\n                  <div\n                    className={`checkout-items-container ${\n                      step === 5 ? \"show-container\" : \"hide-container\"\n                    }`}\n                  >\n                    {step === 5 && <Disclaimer />}\n                  </div>\n                </div>\n                {step === 0 &&\n                  <div className=\"checkout-carousel-container\">\n                    <SectionHeader title=\"Complementary items\" type=\"sub\" style={{ position: 'relative' }} />\n                    <div className=\"checkout-carousel-content\">\n                      <Carousel\n                        items={recommendedProducts}\n                        activeItems={2}\n                        onActiveItemClick={(category, productId) =>\n                          history.push(`/product_list/${category}/${productId}`)\n                        }\n                      />\n                    </div>\n                  </div>\n                }\n              </div>\n              <div className=\"checkout-nav-container\">\n                <CheckoutNavigation\n                  loading={loading}\n                  shouldNavigate={stepNumb => checkShouldNavigate(stepNumb)}\n                  onPlaceOrder={() =>\n                    step === 5 ? setConfirmOrder(true) : setStep(5)\n                  }\n                  onStep={currentStep => setStep(currentStep)}\n                />\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(Checkout);\n","const timestampToDateString = timestamp => {\n  const date = new Date(timestamp);\n  return `${date.toLocaleDateString()} at ${date.toLocaleTimeString()}`;\n};\n\nexport { timestampToDateString };\n","const getStatusColor = status => {\n  if (status === \"PENDING\") {\n    return \"undetermined\";\n  } else if (status === \"CANCELLED\") {\n    return \"negative\";\n  } else {\n    return \"positive\";\n  }\n};\n\nexport { getStatusColor };\n","import React, { useState, useEffect } from \"react\";\nimport SectionHeader from \"../../../components/SectionHeader\";\nimport Table from \"../../../components/Table\";\nimport TableHeader from \"../../../components/TableHeader\";\nimport TableRow from \"../../../components/TableRow\";\nimport builton from \"../../../utils/builton\";\nimport notify from \"../../../utils/toast\";\nimport Spinner from \"../../../components/Spinner\";\nimport { timestampToDateString } from \"../../../utils/dateModifiers\";\nimport useReactRouter from \"use-react-router\";\nimport { getStatusColor } from \"../../../utils/orderModifiers\";\nimport BLogo from \"../../../assets/icons/b_logo\";\nimport Button from \"../../../components/Button\";\n\nconst MyOrders = () => {\n  const [loading, setLoading] = useState(true);\n  const [orders, setOrders] = useState(undefined);\n  const [rawOrders, setRawOrders] = useState(undefined);\n  const [loadMore, setLoadMore] = useState(false);\n\n  const { history } = useReactRouter();\n\n  useEffect(() => {\n    fetchOrders();\n  }, []);\n\n  const fetchOrders = async () => {\n    try {\n      const orders = await builton.orders.get({ size: 10 });\n      setOrders(orders.current);\n      setRawOrders(orders);\n    } catch (err) {\n      notify(\"Failed to fetch orders. Please try again.\", {\n        type: \"error\"\n      });\n    }\n    setLoading(false);\n  };\n\n  const loadMoreOrders = async () => {\n    setLoadMore(true);\n    try {\n      const newOrders = await rawOrders.next();\n      setOrders([...orders, ...newOrders]);\n    } catch(err) {\n      notify(\"Failed to fetch orders. Please try again.\", {\n        type: \"error\"\n      });\n    } finally {\n      setLoadMore(false);\n    }\n  };\n\n  const hasMoreOrders = () => {\n    if (rawOrders && orders && orders.length > 0) {\n      return rawOrders.paginationTotal > orders.length;\n    }\n    return false;\n  };\n\n  return (\n    <>\n      {loading && (\n        <div className=\"spinner-container\">\n          <Spinner />\n        </div>\n      )}\n      {(!loading && orders.length > 0) && (\n        <div className=\"orders-table-container\">\n          <SectionHeader title=\"My Orders\" />\n          <Table>\n            <TableHeader>\n              <div className=\"human-id--row\">#id</div>\n              <div className=\"delivery-status--row\">Delivery status</div>\n              <div className=\"created--row\">Created</div>\n              <div className=\"amount--row\">Amount</div>\n            </TableHeader>\n            {orders &&\n              orders.map(order => {\n                return (\n                  <TableRow\n                    key={`order-${order.human_id}`}\n                    onClick={() =>\n                      history.push(`/my-account/my-orders/${order._id.$oid}`)\n                    }\n                  >\n                    <div className=\"human-id--row\">{order.human_id}</div>\n                    <div\n                      className={`delivery-status--row ${getStatusColor(\n                        order.delivery_status\n                      )}`}\n                    >\n                      {order.delivery_status}\n                    </div>\n                    <div className=\"created--row\">\n                      {timestampToDateString(order.created.$date)}\n                    </div>\n                    <div className=\"amount--row\">\n                      {order.total_amount} {order.currency}\n                    </div>\n                  </TableRow>\n                );\n              })}\n          </Table>\n        </div>\n      )}\n      <div className={`orders-load-more-container ${hasMoreOrders() ? 'show-orders-more' : 'hide-orders-more'}`}>\n        <Button loading={loadMore} onClick={() => loadMoreOrders()} title=\"Load more\" type=\"button\" />\n      </div>\n      {(!loading && orders.length === 0) &&\n        <div className=\"no-orders\">\n          <BLogo width={160} height={120}/>\n          No orders found.\n        </div>\n      }\n    </>\n  );\n};\n\nexport default MyOrders;\n","import React, { useRef, useState } from \"react\";\nimport SectionHeader from \"../../../components/SectionHeader\";\nimport { Field, Form } from \"react-final-form\";\nimport builton from \"../../../utils/builton\";\nimport notify from \"../../../utils/toast\";\nimport Input from \"../../../components/Input\";\nimport Button from \"../../../components/Button\";\nimport { useDispatch, useGlobal } from \"reactn\";\nimport config from \"../../../config\";\nimport Spinner from \"../../../components/Spinner\";\nimport get from 'lodash.get';\nimport Account from \"../../../assets/icons/person\";\n\nconst MyProfile = () => {\n  const [user] = useGlobal(\"user\");\n  const updateUser = useDispatch(\"updateUser\");\n  const [loading, setLoading] = useState(false);\n\n  const fileInputRef = useRef(null);\n\n  const Error = ({ name }) => (\n    <div className=\"form-error-container\">\n      <Field name={name} subscription={{ error: true, touched: true }}>\n        {({ meta: { error, touched } }) =>\n          error && touched ? <span>{error}</span> : null\n        }\n      </Field>\n    </div>\n  );\n\n  const onSubmit = async values => {\n    try {\n      const updatedUser = await builton.users.setMe().update(values);\n      updateUser(updatedUser);\n    } catch (err) {\n      notify(`Failed to update user. Please try again.`, { type: \"error\" });\n    }\n  };\n\n  const validate = values => {\n    const errors = {};\n    if (!values.email) {\n      errors.email = \"Required\";\n    }\n    return errors;\n  };\n\n  const renderUserProfleForm = () => {\n    return (\n      <div className=\"form-content-container\">\n        <Form\n          onSubmit={onSubmit}\n          initialValues={{\n            first_name: user.first_name,\n            last_name: user.last_name,\n            email: user.email\n          }}\n          validate={values => validate(values)}\n        >\n          {({ handleSubmit, submitting }) => (\n            <form onSubmit={handleSubmit} className=\"form-container\">\n              <div className=\"input\">\n                <Field\n                  name=\"first_name\"\n                  type=\"text\"\n                  render={({ input }) => (\n                    <Input\n                      id=\"input-1\"\n                      inputProps={input}\n                      submitting={submitting}\n                      colorScheme={1}\n                      placeholder=\"First Name\"\n                    />\n                  )}\n                />\n                <Error name=\"first_name\" />\n              </div>\n              <div className=\"input\">\n                <Field\n                  name=\"last_name\"\n                  type=\"text\"\n                  render={({ input, meta }) => (\n                    <Input\n                      id=\"input-2\"\n                      inputProps={input}\n                      meta={meta}\n                      submitting={submitting}\n                      colorScheme={1}\n                      placeholder=\"Last Name\"\n                    />\n                  )}\n                />\n                <Error name=\"last_name\" />\n              </div>\n              <div className=\"input\">\n                <Field\n                  name=\"email\"\n                  type=\"email\"\n                  render={({ input, meta }) => (\n                    <Input\n                      id=\"input-3\"\n                      inputProps={input}\n                      submitting={submitting}\n                      meta={meta}\n                      colorScheme={1}\n                      placeholder=\"Email\"\n                    />\n                  )}\n                />\n                <Error name=\"email\" />\n              </div>\n              <div className=\"button-container\">\n                <Button\n                  type=\"submit\"\n                  className=\"button round\"\n                  loading={submitting}\n                  title=\"Save\"\n                />\n              </div>\n            </form>\n          )}\n        </Form>\n      </div>\n    );\n  };\n\n  const handleAvatarUpload = async (ev) => {\n    if (get(ev, 'target.value') && ev.target.files[0]) {\n      ev.persist();\n      const imageData = ev.target.files[0];\n      const fileSize = imageData.size / 1024 / 1024;\n\n      if (fileSize > 5) {\n        notify(\n          'The file size is too large. The maximum allowed size is 5mb.',\n          {\n            type: 'error'\n          }\n        );\n        return false;\n      }\n      setLoading(true);\n      try {\n        const image = await builton.images.create({imageData, isPublic: true});\n        const user = builton.users.setMe();\n        const updatedUser = await user.update({body: {avatar: image.url}});\n        await updateUser(updatedUser);\n        // This makes it possible to re-attach the same file, otherwise onChange on the input does not trigger\n        ev.target.value = '';\n      } catch (err) {\n        notify('Failed to upload image. Please try again.', {\n          type: 'error',\n        })\n      }\n    }\n  };\n\n  const deleteAvatar = async () => {\n    setLoading(true);\n    try {\n      const user = builton.users.setMe();\n      const updatedUser = await user.update({ body: { avatar: '' } });\n      await updateUser(updatedUser);\n    } catch(err) {\n      notify('Failed to delete profile picture. Please try again.', {\n        type: 'error'\n      })\n    }\n    setLoading(false);\n  };\n\n  return (\n    <>\n      <SectionHeader title=\"My Profile\" />\n      <div className=\"profile-image-container\">\n        <div className=\"image-upload-container\">\n          <input type=\"file\" name=\"file\" ref={fileInputRef} onChange={handleAvatarUpload} accept=\"image/gif,image/jpeg,image/png,image/jpg\"/>\n          {user.avatar &&\n            <img\n              src={`${config.endpoint}/images/${user.avatar}?api_key=${config.apiKey}`}\n              alt={`profile-img-${user.first_name}`}\n              onLoad={() => setLoading(false)}\n              onError={() => setLoading(false)}\n            />\n          }\n          {!user.avatar &&\n            <div className=\"empty-image-container\">\n              <Account width={48} height={48} color={'#C0C0C0'} />\n            </div>\n          }\n          {!loading &&\n            <div className=\"image-upload-actions\">\n              <button type=\"button\" className=\"button-link\" onClick={() => fileInputRef.current.click()}>\n                {user.avatar ? 'Change' : 'Upload'}\n              </button>\n              {user.avatar &&\n                <button type=\"button\" className=\"button-link\" onClick={() => deleteAvatar()}>\n                  Delete\n                </button>\n              }\n            </div>\n          }\n          {loading &&\n            <div className=\"image-loading-container\">\n              <Spinner/>\n            </div>\n          }\n        </div>\n      </div>\n      <SectionHeader title=\"General settings\" type=\"sub\" />\n      {renderUserProfleForm()}\n    </>\n  );\n};\n\nexport default MyProfile;\n","import React, { useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport useReactRouter from \"use-react-router\";\n\nimport \"./index.scss\";\nimport Header from \"../../components/Header\";\nimport MyOrders from \"./MyOrders\";\nimport MyProfile from \"./MyProfile\";\n\nconst MyAccount = () => {\n  const { match, history } = useReactRouter();\n  const [activeMenu, setActiveMenu] = useState(\"my-profile\");\n\n  useEffect(() => {\n    if (match.params.menuId) {\n      setActiveMenu(match.params.menuId);\n    }\n  }, [match.params.menuId]);\n\n  return (\n    <div className=\"main-container\">\n      <Header />\n      <div className=\"my-account-wrapper\">\n        <div className=\"my-account-menu-container\">\n          <div className=\"my-account-menu-wrapper\">\n            <div\n              onClick={() => history.push(\"/my-account/my-profile\")}\n              className={`${\n                activeMenu === \"my-profile\" ? \"active-menu-item\" : \"\"\n              }`}\n            >\n              My Profile\n            </div>\n            <div\n              onClick={() => history.push(\"/my-account/my-orders\")}\n              className={`${\n                activeMenu === \"my-orders\" ? \"active-menu-item\" : \"\"\n              }`}\n            >\n              My Orders\n            </div>\n          </div>\n        </div>\n        <div className=\"my-account-content-container\">\n          <div\n            className={`my-account-content my-profile-content ${\n              activeMenu === \"my-profile\"\n                ? \"show-my-account\"\n                : \"hide-my-account\"\n            }`}\n          >\n            {activeMenu === \"my-profile\" && <MyProfile />}\n          </div>\n          <div\n            className={`my-account-content ${\n              activeMenu === \"my-orders\" ? \"show-my-account\" : \"hide-my-account\"\n            }`}\n          >\n            {activeMenu === \"my-orders\" && <MyOrders />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(MyAccount);\n","import React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport useReactRouter from 'use-react-router';\nimport builton from '../../utils/builton';\nimport notify from '../../utils/toast';\nimport Header from \"../../components/Header\";\nimport './index.scss';\nimport BuiltonSplash from \"../../components/BuiltonSplash\";\nimport SectionHeader from \"../../components/SectionHeader\";\nimport {getStatusColor} from \"../../utils/orderModifiers\";\nimport {timestampToDateString} from \"../../utils/dateModifiers\";\nimport {parseAddress} from \"../../utils/address\";\nimport ListItem from \"../../components/ListItem\";\nimport Table from \"../../components/Table\";\nimport TableHeader from \"../../components/TableHeader\";\nimport TableRow from \"../../components/TableRow\";\n\nconst MyOrder = () => {\n  const [order, setOrder] = useState(undefined);\n  const [loading, setLoading] = useState(true);\n\n  const { match } = useReactRouter();\n\n  useEffect(() => {\n    if (match.params.orderId) {\n      const fetchOrder = async () => {\n        try {\n          const order = await builton.orders.get(match.params.orderId, {\n            urlParams: {\n              expand: 'payments,items.product.image,payments.payment_method'\n            }\n          });\n          setOrder(order);\n        } catch(err) {\n          notify('Failed to fetch order. Please try again', {\n            type: 'error'\n          })\n        }\n        setLoading(false)\n      };\n\n      fetchOrder();\n    }\n  }, [match.params.orderId]);\n\n  const calculateTotalAmount = () => {\n    let total = 0;\n    if (order)\n    for (let i = 0; i < order.items.length; i += 1) {\n      total += order.items[i].product.final_price;\n    }\n    return total;\n  };\n\n  return (\n    <div className=\"main-container\">\n      <Header />\n      <div className=\"my-order-wrapper\">\n        <BuiltonSplash show={loading} />\n        <div className=\"my-order-container\">\n        {(!loading && order) &&\n          <>\n            <SectionHeader title={`Order #${order.human_id}`} />\n            <div className=\"my-order-inner-container\">\n              <div className=\"my-order-general\">\n                <SectionHeader title=\"General information\" type=\"sub\" />\n                <div className=\"my-order-general-row\">\n                  <div className=\"my-order-left\">\n                    Order Created\n                  </div>\n                  <div className={`my-order-right`}>\n                    {timestampToDateString(order.created.$date)}\n                  </div>\n                </div>\n                <div className=\"my-order-general-row\">\n                  <div className=\"my-order-left\">\n                    Order Status\n                  </div>\n                  <div className={`my-order-right ${getStatusColor(order.delivery_status)}`}>\n                    {order.delivery_status}\n                  </div>\n                </div>\n                <div className=\"my-order-general-row\">\n                  <div className=\"my-order-left\">\n                    Delivery address\n                  </div>\n                  <div className={`my-order-right`}>\n                    {parseAddress(order.delivery_address)}\n                  </div>\n                </div>\n              </div>\n              <div className=\"my-order-payment-method\">\n                <SectionHeader title=\"Payment method\" type=\"sub\" />\n                {order.payments.map(payment =>\n                  (payment.current_state === 'created' || payment.current_state === 'success') && <ListItem key={`order-payment-${payment._id.$oid}`}>\n                    <div className=\"payment-method-left \">\n                      <div className=\"payment-card-number\">\n                        **** **** **** {order.payments[0].payment_method.card.last4}\n                      </div>\n                      <div className=\"payment-method-card-name\">John Doe</div>\n                    </div>\n                    <div className=\"payment-method-right\">\n                      <div className=\"payment-card-exp-date\">\n                        {order.payments[0].payment_method.card.exp_month} / {order.payments[0].payment_method.card.exp_year}\n                      </div>\n                      <div className=\"payment-method-checkmark\">&#10003;</div>\n                    </div>\n                  </ListItem>\n                )}\n              </div>\n              <div className=\"my-order-products\">\n                <SectionHeader title=\"Products\" type=\"sub\" />\n                <Table>\n                  <TableHeader>\n                    <div className=\"my-order-product-img\">\n                      #\n                    </div>\n                    <div className=\"my-order-product-name\">\n                      Name\n                    </div>\n                    <div className=\"my-order-product-price\">\n                      Price\n                    </div>\n                  </TableHeader>\n                  {order.items.map((product, index) =>\n                    <TableRow key={`product-item-${product.product._id.$oid}-${index}`}>\n                      <div className=\"my-order-product-img row\">\n                        <img\n                          src={product.product.image.public_url}\n                          alt={`${product.name}-img`}\n                        />\n                      </div>\n                      <div className=\"my-order-product-name\">\n                        {product.product.name}\n                      </div>\n                      <div className=\"my-order-product-price row\">\n                        {product.product.final_price} {product.product.currency}\n                      </div>\n                    </TableRow>\n                  )}\n                  <TableRow className=\"product-total-row\">\n                    <div className=\"product-total-title\">Total</div>\n                    <div className=\"product-total\">\n                      {calculateTotalAmount()} {order.currency}\n                    </div>\n                  </TableRow>\n                </Table>\n              </div>\n            </div>\n          </>\n        }\n        </div>\n      </div>\n    </div>\n  )\n};\n\nexport default withRouter(MyOrder)\n","import React from 'react';\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect\n} from 'react-router-dom';\n\nimport './App.scss';\n\nimport Home from \"./screens/Home\";\nimport Auth from './screens/Auth';\nimport ProductList from './screens/ProductList';\nimport Product from './screens/Product';\nimport Checkout from './screens/Checkout';\nimport MyAccount from './screens/MyAccount';\nimport MyOrder from './screens/MyOrder';\n\nimport {ToastContainer} from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useGlobal } from 'reactn';\n\nconst ProtectedRoute = ({component: Component, ...props}) => {\n  const [user] = useGlobal('user');\n  const renderView = (props) => {\n    if (props.match.path === '/auth') {\n      // This is to make sure you can not open the auth view after you have logged in\n      if (!!user) {\n        return <Redirect to=\"/\" />;\n      } else {\n        return <Auth />;\n      }\n    } else {\n      if (!!user) {\n        return <Component {...props} />;\n      } else {\n        return <Redirect to=\"/auth\" />;\n      }\n    }\n  };\n\n  return (\n    <Route\n      {...props}\n      render={props => renderView(props)}\n    />\n  )\n};\n\nconst App = () => {\n  return(\n    <div style={{ display: 'flex', flex: 1}}>\n      <Router>\n        <Switch>\n          <Route exact path=\"/\" component={Home}/>\n          <ProtectedRoute exact component={Home} path=\"/auth\" />\n          <Route exact path=\"/product_list/:category\" component={ProductList} />\n          <Route exact path=\"/product_list/:category/:productId\" component={Product} />\n          <Route exact path=\"/checkout/:step\" component={Checkout} />\n          <ProtectedRoute exact path=\"/my-account/:menuId\" component={MyAccount} />\n          <ProtectedRoute exact path=\"/my-account/my-orders/:orderId\" component={MyOrder} />\n          <Route render={() => <Redirect to=\"/\" />} />\n        </Switch>\n      </Router>\n      <ToastContainer style={{ top: '4rem' }} />\n    </div>\n  )\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/adidas-logo.b6e2ef89.png\";","module.exports = __webpack_public_path__ + \"static/media/nike-logo.aadac220.png\";"],"sourceRoot":""}